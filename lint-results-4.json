[{"filePath":"D:\\Automation\\automation-platform\\app\\api\\ai\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[321,324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[321,324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3262,3265],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3262,3265],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_field' is assigned a value but never used.","line":111,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":111,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":122,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6023,6026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6023,6026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\n\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\n// Initialize Gemini\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || '');\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { prompt } = await req.json();\r\n    const steps: any[] = [];\r\n\r\n    // 1. Try Gemini API first if Key matches heuristic (simple check)\r\n    if (process.env.GEMINI_API_KEY) {\r\n        try {\r\n            const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n            \r\n            const systemPrompt = `\r\n                You are an automation expert. Convert the user's natural language request into a valid JSON array of Playwright automation steps.\r\n                \r\n                The output MUST be a valid JSON object with the following structure:\r\n                {\r\n                    \"steps\": [ ... array of steps as defined before ... ],\r\n                    \"pythonCode\": \"string containing the full python playwright script\"\r\n                }\r\n                \r\n                Step Schema:\r\n                {\r\n                    \"id\": string,\r\n                    \"action\": \"goto\" | \"click\" | \"type\" | \"wait\" | \"assertion\",\r\n                    \"selector\": string (optional, for click/type),\r\n                    \"value\": string (optional, for goto/type/wait/assertion),\r\n                    \"description\": string\r\n                }\r\n                \r\n                Python Code Rules:\r\n                - Use \\`playwright.sync_api\\`.\r\n                - Include full script with \\`from playwright.sync_api import sync_playwright\\`.\r\n                - Wrap in \\`run(playwright)\\` function and \\`with sync_playwright() as playwright:\\` block.\r\n                - Include helpful comments.\r\n                \r\n                Example Input: \"Login to example.com with user demo\"\r\n                Example Output:\r\n                {\r\n                    \"steps\": [\r\n                        { \"id\": \"1\", \"action\": \"goto\", \"value\": \"https://example.com\", \"description\": \"Navigate to URL\" },\r\n                        { \"id\": \"2\", \"action\": \"type\", \"selector\": \"input[name='user']\", \"value\": \"demo\", \"description\": \"Enter username\" },\r\n                        { \"id\": \"3\", \"action\": \"click\", \"selector\": \"button:has-text('Login')\", \"description\": \"Click Login\" }\r\n                    ],\r\n                    \"pythonCode\": \"from playwright.sync_api import sync_playwright\\\\n\\\\ndef run(playwright):\\\\n    browser = playwright.chromium.launch(headless=False)\\\\n    page = browser.new_page()\\\\n    page.goto('https://example.com')\\\\n    page.fill(\\\"input[name='user']\\\", 'demo')\\\\n    page.click(\\\"button:has-text('Login')\\\")\\\\n    browser.close()\\\\n\\\\nwith sync_playwright() as playwright:\\\\n    run(playwright)\"\r\n                }\r\n            `;\r\n\r\n            const result = await model.generateContent([systemPrompt, prompt]);\r\n            const response = await result.response;\r\n            const text = response.text();\r\n            \r\n            \r\n            // Clean up code blocks if present (Gemini might wrap the whole JSON in ```json ... ```)\r\n            const cleanText = text.replace(/```json/g, '').replace(/```/g, '').trim();\r\n            let data: any;\r\n            try {\r\n                 data = JSON.parse(cleanText);\r\n            } catch {\r\n                 // specific handling if JSON is broken, but return raw text anyway\r\n                 return NextResponse.json({ success: false, error: \"Failed to parse AI response\", raw: text });\r\n            }\r\n            \r\n            return NextResponse.json({ \r\n                success: true, \r\n                steps: data.steps, \r\n                pythonCode: data.pythonCode, \r\n                raw: text, // Return raw response for UI display\r\n                message: \"Generated automation steps and Python code.\" \r\n            });\r\n\r\n        } catch (error) {\r\n            console.error(\"Gemini API Error:\", error);\r\n            // Fallthrough to rule-based\r\n        }\r\n    }\r\n\r\n    // 2. Fallback: Rule-based Parsing (if no API key or API fails)\r\n    const lowerPrompt = prompt.toLowerCase();\r\n    const commands = lowerPrompt.split(/,|\\sand\\s|\\sthen\\s/); \r\n    \r\n    commands.forEach((cmd: string, index: number) => {\r\n        cmd = cmd.trim();\r\n        const id = (index + 1).toString();\r\n\r\n        if (cmd.startsWith('go to') || cmd.startsWith('open') || cmd.startsWith('navigate')) {\r\n            const urlMatch = cmd.match(/https?:\\/\\/[^\\s]+/) || cmd.match(/www\\.[^\\s]+/);\r\n            let url = urlMatch ? urlMatch[0] : '';\r\n            if (url && !url.startsWith('http')) url = 'https://' + url;\r\n            if (!url && cmd.includes('google')) url = 'https://google.com';\r\n            \r\n            if (url) {\r\n                steps.push({ id, action: 'goto', value: url, description: `Navigate to ${url}` });\r\n            }\r\n        }\r\n        else if (cmd.includes('click') || cmd.includes('press')) {\r\n            const target = cmd.replace(/click|press|on/g, '').trim();\r\n            let selector = `text=${target}`;\r\n            if (target.toLowerCase() === 'login') selector = 'button:has-text(\"Login\")';\r\n            steps.push({ id, action: 'click', selector, description: `Click \"${target}\"` });\r\n        }\r\n        else if (cmd.includes('type') || cmd.includes('enter') || cmd.includes('fill')) {\r\n            const parts = cmd.split(/ in | into /);\r\n            const value = parts[0].replace(/type|enter|fill/g, '').trim().replace(/^[\"']|[\"']$/g, '');\r\n            const _field = parts[1]?.trim() || 'input';\r\n            steps.push({ id, action: 'type', selector: 'input', value, description: `Type \"${value}\"` });\r\n        }\r\n    });\r\n\r\n    if (steps.length === 0) {\r\n         steps.push({ id: '1', action: 'goto', value: 'https://example.com', description: 'Navigate to Example (Fallback)' });\r\n    }\r\n\r\n    return NextResponse.json({ success: true, steps, message: \"Generated steps (Rule-Based Fallback).\" });\r\n\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\bdd\\run\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1071,1074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1071,1074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1482,1485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1482,1485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { exec } from 'child_process';\r\nimport util from 'util';\r\nimport fs from 'fs/promises';\r\n\r\n\r\nconst execAsync = util.promisify(exec);\r\nconst REPORT_FILE = 'cucumber-report.json';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { features, tags } = await req.json(); // optional: run specific features/tags\r\n    \r\n    // Command to run cucumber\r\n    // We use npx cucumber-js\r\n    let command = 'npx cucumber-js';\r\n    \r\n    if (tags) {\r\n        command += ` --tags \"${tags}\"`;\r\n    }\r\n\r\n    if (features && Array.isArray(features)) {\r\n        command += ` ${features.join(' ')}`;\r\n    }\r\n    \r\n    try {\r\n        const { stdout } = await execAsync(command);\r\n        \r\n        // Read report\r\n        let report = [];\r\n        try {\r\n            const reportContent = await fs.readFile(REPORT_FILE, 'utf-8');\r\n            report = JSON.parse(reportContent);\r\n        } catch { /* ignore if no report */ }\r\n\r\n        return NextResponse.json({ success: true, logs: stdout, report });\r\n    } catch (e: any) {\r\n        // Cucumber exits with non-zero on test fail\r\n         let report = [];\r\n        try {\r\n            const reportContent = await fs.readFile(REPORT_FILE, 'utf-8');\r\n            report = JSON.parse(reportContent);\r\n        } catch { /* ignore */ }\r\n        \r\n        return NextResponse.json({ success: true, result: false, logs: e.stdout + '\\n' + e.stderr, report });\r\n    }\r\n\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\cicd\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[329,332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[329,332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { CICDGenerator, CIConfig } from '@/lib/cicd';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const config: CIConfig = await req.json();\r\n    const yaml = CICDGenerator.generate(config);\r\n    return NextResponse.json({ success: true, yaml });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\data\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[486,489],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[486,489],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { DataProvider } from '@/lib/data-provider';\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const path = searchParams.get('path');\r\n    \r\n    if (!path) {\r\n        return NextResponse.json({ error: 'Path required' }, { status: 400 });\r\n    }\r\n\r\n    const data = await DataProvider.loadData(path);\r\n    return NextResponse.json({ success: true, data });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\files\\read\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[478,481],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[478,481],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { readTestFile } from '@/lib/files';\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const path = searchParams.get('path');\r\n    \r\n    if (!path) {\r\n      return NextResponse.json({ error: 'File path required' }, { status: 400 });\r\n    }\r\n\r\n    const content = await readTestFile(path);\r\n    return NextResponse.json({ success: true, content });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 404 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\files\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[375,378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[375,378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[812,815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[812,815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1324,1327],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1324,1327],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { listFiles, saveTestFile } from '@/lib/files';\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const dir = searchParams.get('dir') || '';\r\n    \r\n    const files = await listFiles(dir);\r\n    return NextResponse.json({ success: true, files });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { path, content } = await req.json();\r\n    \r\n    if (!path || !content) {\r\n      return NextResponse.json({ error: 'Path and content required' }, { status: 400 });\r\n    }\r\n\r\n    await saveTestFile(path, content);\r\n    return NextResponse.json({ success: true });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const path = searchParams.get('path');\r\n    \r\n    if (!path) {\r\n      return NextResponse.json({ error: 'Path required' }, { status: 400 });\r\n    }\r\n\r\n    const { deleteTestFile } = await import('@/lib/files');\r\n    await deleteTestFile(path);\r\n    return NextResponse.json({ success: true });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\jobs\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_req' is defined but never used.","line":13,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[742,745],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[742,745],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1644,1647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1644,1647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2117,2120],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2117,2120],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport db from '@/lib/db';\r\nimport { stopJob } from '@/lib/cron'; // We might need to adjust import if lib/cron.ts is not compliant with Next.js edge runtime (it uses node-cron which is Node only, so valid for Node runtime)\r\n\r\n// Initialize scheduler on first load of this route (lazy init for dev)\r\nlet initialized = false;\r\nif (!initialized) {\r\n    // initScheduler(); // Commented out to avoid side-effects during build, we can init on POST\r\n    initialized = true;\r\n}\r\n\r\nexport async function GET(_req: Request) {\r\n  try {\r\n    const jobs = db.prepare('SELECT * FROM scheduled_jobs ORDER BY created_at DESC').all();\r\n    return NextResponse.json({ success: true, jobs });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { test_name, schedule } = await req.json();\r\n\r\n    if (!test_name || !schedule) {\r\n        return NextResponse.json({ error: 'Missing name or schedule' }, { status: 400 });\r\n    }\r\n\r\n    const stmt = db.prepare('INSERT INTO scheduled_jobs (test_name, cron_schedule, test_type, active) VALUES (?, ?, ?, 1)');\r\n    const res = stmt.run(test_name, schedule, 'file');\r\n    \r\n    const newJob = {\r\n        id: res.lastInsertRowid,\r\n        test_name,\r\n        cron_schedule: schedule,\r\n        test_type: 'file',\r\n        active: 1\r\n    };\r\n\r\n    // Add to active scheduler\r\n    // scheduleJob(newJob); \r\n    // Note: We need to ensure scheduleJob is safe to call. \r\n\r\n    return NextResponse.json({ success: true, job: newJob });\r\n\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n    try {\r\n        const { searchParams } = new URL(req.url);\r\n        const id = searchParams.get('id');\r\n        \r\n        if (id) {\r\n            db.prepare('DELETE FROM scheduled_jobs WHERE id = ?').run(id);\r\n            stopJob(Number(id));\r\n            return NextResponse.json({ success: true });\r\n        }\r\n    } catch (error: any) {\r\n        return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\pom\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1370,1373],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1370,1373],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2769,2772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2769,2772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3866,3869],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3866,3869],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport db from '@/lib/db';\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const type = searchParams.get('type'); // 'pages' or 'selectors'\r\n    const pageId = searchParams.get('pageId');\r\n\r\n    if (type === 'pages') {\r\n        const stmt = db.prepare('SELECT * FROM pages ORDER BY name');\r\n        const pages = stmt.all();\r\n        return NextResponse.json({ success: true, data: pages });\r\n    }\r\n\r\n    if (type === 'selectors') {\r\n        let query = 'SELECT * FROM selectors';\r\n        const params = [];\r\n        if (pageId) {\r\n            query += ' WHERE page_id = ?';\r\n            params.push(pageId);\r\n        }\r\n        const stmt = db.prepare(query);\r\n        const selectors = stmt.all(...params);\r\n        return NextResponse.json({ success: true, data: selectors });\r\n    }\r\n\r\n    if (type === 'tests') {\r\n        let query = 'SELECT * FROM page_tests';\r\n        const params = [];\r\n        if (pageId) {\r\n            query += ' WHERE page_id = ?';\r\n            params.push(pageId);\r\n        }\r\n        const stmt = db.prepare(query);\r\n        const tests = stmt.all(...params);\r\n        return NextResponse.json({ success: true, data: tests });\r\n    }\r\n\r\n    return NextResponse.json({ error: 'Invalid type' }, { status: 400 });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n    const { type } = body;\r\n\r\n    if (type === 'page') {\r\n        const { name, url, description } = body;\r\n        const stmt = db.prepare('INSERT INTO pages (name, url, description) VALUES (?, ?, ?)');\r\n        const res = stmt.run(name, url, description);\r\n        return NextResponse.json({ success: true, id: res.lastInsertRowid });\r\n    }\r\n\r\n    if (type === 'selector') {\r\n        const { pageId, name, selector, elementType, description } = body;\r\n        const stmt = db.prepare('INSERT INTO selectors (page_id, name, selector, type, description) VALUES (?, ?, ?, ?, ?)');\r\n        const res = stmt.run(pageId, name, selector, elementType, description);\r\n        return NextResponse.json({ success: true, id: res.lastInsertRowid });\r\n    }\r\n\r\n    if (type === 'test') {\r\n        const { pageId, name, steps, description } = body;\r\n        const stmt = db.prepare('INSERT INTO page_tests (page_id, name, steps, description) VALUES (?, ?, ?, ?)');\r\n        const res = stmt.run(pageId, name, JSON.stringify(steps), description);\r\n        return NextResponse.json({ success: true, id: res.lastInsertRowid });\r\n    }\r\n\r\n    return NextResponse.json({ error: 'Invalid type' }, { status: 400 });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const type = searchParams.get('type');\r\n    const id = searchParams.get('id');\r\n\r\n    if (!id) {\r\n        return NextResponse.json({ error: 'ID required' }, { status: 400 });\r\n    }\r\n\r\n    if (type === 'page') {\r\n        db.prepare('DELETE FROM selectors WHERE page_id = ?').run(id);\r\n        db.prepare('DELETE FROM page_tests WHERE page_id = ?').run(id);\r\n        db.prepare('DELETE FROM pages WHERE id = ?').run(id);\r\n        return NextResponse.json({ success: true });\r\n    }\r\n\r\n    if (type === 'selector') {\r\n        db.prepare('DELETE FROM selectors WHERE id = ?').run(id);\r\n        return NextResponse.json({ success: true });\r\n    }\r\n\r\n    if (type === 'test') {\r\n        db.prepare('DELETE FROM page_tests WHERE id = ?').run(id);\r\n        return NextResponse.json({ success: true });\r\n    }\r\n\r\n    return NextResponse.json({ error: 'Invalid type' }, { status: 400 });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\record\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[209,212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[209,212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":61,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2806,2809],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2806,2809],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { exec } from 'child_process';\r\nimport fs from 'fs/promises';\r\nimport path from 'path';\r\n\r\n\r\n// Store the recorder process reference\r\nlet recorderProcess: any = null;\r\n\r\n// Dynamic temp file path based on language\r\nconst getTempFile = (lang: string) => path.join(process.cwd(), `temp_recording.${lang === 'python' ? 'py' : 'js'}`);\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n        const { action, url, language } = await req.json();\r\n        const tempFile = getTempFile(language || 'javascript');\r\n\r\n        if (action === 'start') {\r\n            // Start Codegen and save to temp file\r\n            // --target python if needed\r\n            const targetFlag = language === 'python' ? '--target python' : '';\r\n            const command = `npx playwright codegen ${url || ''} --output \"${tempFile}\" ${targetFlag} --viewport-size=1920,1080`;\r\n            \r\n            recorderProcess = exec(command, (error) => {\r\n            if (error) console.error('Codegen Error:', error);\r\n            recorderProcess = null;\r\n        });\r\n\r\n        return NextResponse.json({ success: true, message: 'Recorder started.' });\r\n    }\r\n\r\n    if (action === 'stop') {\r\n        // Kill the process if running\r\n        if (recorderProcess) {\r\n            // On Windows, killing the shell might not kill the child. \r\n            // We use taskkill to be sure, targeting the process group or just the pid\r\n            try {\r\n                process.kill(recorderProcess.pid); // Attempt graceful kill\r\n                // Force kill if needed (on Windows tree kill is better)\r\n                exec(`taskkill /pid ${recorderProcess.pid} /T /F`);\r\n            } catch {\r\n                console.log(\"Error killing recorder\");\r\n            }\r\n            recorderProcess = null;\r\n        }\r\n\r\n        // Read the temp file - try both potential extensions if language not passed, or just look for what matches\r\n        // Actually, we should track what language was started. For now, let's just try reading both or check file existence.\r\n        // Or assume the user passes the same language 'stop' as 'start' (UI should handle this).\r\n        // Let's just try both.\r\n        try {\r\n            let content = '';\r\n            try {\r\n                content = await fs.readFile(getTempFile('javascript'), 'utf-8');\r\n            } catch {\r\n                content = await fs.readFile(getTempFile('python'), 'utf-8');\r\n            }\r\n            \r\n            return NextResponse.json({ success: true, code: content });\r\n        } catch (e) {\r\n            return NextResponse.json({ success: false, error: 'No recording found or file empty.' });\r\n        }\r\n    }\r\n\r\n    return NextResponse.json({ error: 'Invalid action' }, { status: 400 });\r\n\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\reports\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_req' is defined but never used.","line":5,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[935,938],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[935,938],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport db from '@/lib/db';\r\n\r\nexport async function GET(_req: Request) {\r\n  try {\r\n    const runs = db.prepare(`\r\n        SELECT \r\n            r.id, \r\n            r.status, \r\n            r.duration_ms, \r\n            r.screenshot,\r\n            r.logs,\r\n            r.test_path,\r\n            r.created_at, \r\n            f.name as flow_name \r\n        FROM test_runs r\r\n        LEFT JOIN test_flows f ON r.flow_id = f.id\r\n        ORDER BY r.created_at DESC\r\n        LIMIT 50\r\n    `).all();\r\n\r\n    const stats = db.prepare(`\r\n        SELECT \r\n            COUNT(*) as total,\r\n            SUM(CASE WHEN status = 'passed' THEN 1 ELSE 0 END) as passed,\r\n            SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END) as failed,\r\n            AVG(duration_ms) as avg_duration\r\n        FROM test_runs\r\n    `).get();\r\n\r\n    return NextResponse.json({ success: true, runs, stats });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\scrape\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_e' is defined but never used.","line":38,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1700,1703],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1700,1703],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { chromium } from 'playwright';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { url, selector, login, headless = true } = await req.json(); // Default to true if not sent\r\n\r\n    if (!url) {\r\n      return NextResponse.json({ error: 'URL is required' }, { status: 400 });\r\n    }\r\n\r\n    // Launch with user reference for headless\r\n    const browser = await chromium.launch({ headless: headless });\r\n    \r\n    const context = await browser.newContext();\r\n    const page = await context.newPage();\r\n    \r\n    if (login && login.enabled) {\r\n        console.log('Performing Login...');\r\n        await page.goto(login.url || url, { waitUntil: 'domcontentloaded' });\r\n        await page.waitForSelector(login.usernameSelector);\r\n        await page.fill(login.usernameSelector, login.username);\r\n        await page.fill(login.passwordSelector, login.password);\r\n        await Promise.all([\r\n            page.waitForNavigation({ waitUntil: 'domcontentloaded' }),\r\n            page.click(login.submitSelector)\r\n        ]);\r\n    }\r\n\r\n    await page.goto(url, { waitUntil: 'domcontentloaded' });\r\n\r\n    let data;\r\n    if (selector) {\r\n      try {\r\n          await page.waitForSelector(selector, { timeout: 5000 });\r\n          data = await page.$$eval(selector, (elements) => elements.map(el => el.textContent?.trim()));\r\n      } catch (_e) {\r\n          data = { warning: `Selector \"${selector}\" not found.` };\r\n      }\r\n    } else {\r\n      data = { \r\n          title: await page.title(),\r\n          url: page.url(),\r\n      };\r\n    }\r\n\r\n    await browser.close();\r\n\r\n    return NextResponse.json({ success: true, data });\r\n  } catch (error: any) {\r\n    console.error('Scrape error:', error);\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\suites\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[260,263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[260,263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { getTestsWithTags } from '@/lib/files';\r\n\r\nexport async function GET() {\r\n  try {\r\n    const suites = await getTestsWithTags();\r\n    return NextResponse.json({ success: true, suites });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\suites\\run\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[679,682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[679,682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1607,1610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1607,1610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2260,2263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2260,2263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { getTestsWithTags, readTestFile } from '@/lib/files';\r\nimport { TestRunner } from '@/lib/test-runner';\r\nimport { runManager } from '@/lib/run-manager';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { tag, concurrency = 1 } = await req.json();\r\n    if (!tag) {\r\n        return NextResponse.json({ error: 'Tag is required' }, { status: 400 });\r\n    }\r\n\r\n    const suites = await getTestsWithTags();\r\n    const tests = suites[tag] || [];\r\n\r\n    if (tests.length === 0) {\r\n        return NextResponse.json({ success: true, results: [], message: 'No tests found for this tag' });\r\n    }\r\n\r\n    const results: any[] = [];\r\n    const queue = [...tests];\r\n    const workers = [];\r\n\r\n    const runWorker = async () => {\r\n        while (queue.length > 0) {\r\n            const test = queue.shift();\r\n            if (!test) break;\r\n\r\n            try {\r\n                const content = await readTestFile(test.path);\r\n                const steps = Array.isArray(content) ? content : (content.steps || []);\r\n                const runner = new TestRunner({ headless: true });\r\n                const runKey = `suite-${tag}-${test.name}-${Date.now()}`;\r\n                runManager.register(runKey, runner);\r\n                \r\n                try {\r\n                    const result = await runner.runFlow(0, steps);\r\n                    results.push({ name: test.name, success: result.success, duration: result.duration });\r\n                } finally {\r\n                    runManager.unregister(runKey);\r\n                }\r\n            } catch (e: any) {\r\n                results.push({ name: test.name, success: false, error: e.message });\r\n            }\r\n        }\r\n    };\r\n\r\n    // Launch workers up to concurrency limit\r\n    for (let i = 0; i < Math.min(concurrency, tests.length); i++) {\r\n        workers.push(runWorker());\r\n    }\r\n\r\n    await Promise.all(workers);\r\n\r\n    const totalPassed = results.filter(r => r.success).length;\r\n    \r\n    return NextResponse.json({ \r\n        success: true, \r\n        results, \r\n        summary: {\r\n            total: results.length,\r\n            passed: totalPassed,\r\n            failed: results.length - totalPassed\r\n        }\r\n    });\r\n\r\n  } catch (error: any) {\r\n    console.error('Suite Runner Error:', error);\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\tests\\exec\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_e' is defined but never used.","line":60,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2721,2724],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2721,2724],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_err' is defined but never used.","line":86,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":86,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4065,4068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4065,4068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { exec } from 'child_process';\r\nimport util from 'util';\r\nimport db from '@/lib/db';\r\nimport fs from 'fs/promises';\r\nimport path from 'path';\r\n\r\nconst execAsync = util.promisify(exec);\r\n\r\nexport async function POST(req: Request) {\r\n  const startTime = Date.now();\r\n  let runId: number | bigint = 0;\r\n  \r\n  try {\r\n    const { path: filePath } = await req.json();\r\n\r\n    if (!filePath) {\r\n        return NextResponse.json({ error: 'Missing file path' }, { status: 400 });\r\n    }\r\n\r\n    // Initialize run record\r\n    const insertRun = db.prepare('INSERT INTO test_runs (flow_id, status, logs, test_path) VALUES (?, ?, ?, ?)');\r\n    const info = insertRun.run(0, 'running', 'Execution started...', filePath);\r\n    runId = info.lastInsertRowid;\r\n\r\n    let command = '';\r\n    \r\n    // Determine command based on extension and add screenshot flags\r\n    if (filePath.endsWith('.py')) {\r\n        command = `python -m pytest \"${filePath}\" --screenshot=on`;\r\n    } else if (filePath.endsWith('.js') || filePath.endsWith('.ts')) {\r\n        command = `npx playwright test \"${filePath}\" --reporter=line --screenshot=on`; \r\n    } else {\r\n        return NextResponse.json({ error: 'Unsupported file type' }, { status: 400 });\r\n    }\r\n\r\n    try {\r\n        const { stdout, stderr } = await execAsync(command);\r\n        const logs = (stdout + '\\n' + stderr);\r\n        const duration = Date.now() - startTime;\r\n        \r\n        // Try to find screenshot\r\n        let screenshotPath = '';\r\n        try {\r\n            const resultsDir = path.join(process.cwd(), 'test-results');\r\n            const dirs = await fs.readdir(resultsDir);\r\n            if (dirs.length > 0) {\r\n                // Find latest screenshot in latest result dir\r\n                const latestDir = dirs.sort().reverse()[0];\r\n                const shotFiles = await fs.readdir(path.join(resultsDir, latestDir));\r\n                const shot = shotFiles.find(f => f.endsWith('.png'));\r\n                if (shot) {\r\n                    const newName = `run_${runId}_${Date.now()}.png`;\r\n                    const publicPath = path.join(process.cwd(), 'public', 'screenshots', newName);\r\n                    await fs.copyFile(path.join(resultsDir, latestDir, shot), publicPath);\r\n                    screenshotPath = `/screenshots/${newName}`;\r\n                }\r\n            }\r\n        } catch (_e) {}\r\n\r\n        db.prepare('UPDATE test_runs SET status = ?, logs = ?, duration_ms = ?, screenshot = ? WHERE id = ?')\r\n          .run('passed', logs, duration, screenshotPath, runId);\r\n\r\n        return NextResponse.json({ success: true, logs: logs.split('\\n'), result: true, screenshot: screenshotPath });\r\n    } catch (e: any) {\r\n        const logs = (e.stdout + '\\n' + e.stderr);\r\n        const duration = Date.now() - startTime;\r\n\r\n        // Try to find screenshot on failure\r\n        let screenshotPath = '';\r\n        try {\r\n            const resultsDir = path.join(process.cwd(), 'test-results');\r\n            const dirs = await fs.readdir(resultsDir);\r\n            if (dirs.length > 0) {\r\n                const latestDir = dirs.sort().reverse()[0];\r\n                const shotFiles = await fs.readdir(path.join(resultsDir, latestDir));\r\n                const shot = shotFiles.find(f => f.endsWith('.png'));\r\n                if (shot) {\r\n                    const newName = `run_${runId}_fail_${Date.now()}.png`;\r\n                    const publicPath = path.join(process.cwd(), 'public', 'screenshots', newName);\r\n                    await fs.copyFile(path.join(resultsDir, latestDir, shot), publicPath);\r\n                    screenshotPath = `/screenshots/${newName}`;\r\n                }\r\n            }\r\n        } catch (_err) {}\r\n\r\n        db.prepare('UPDATE test_runs SET status = ?, logs = ?, duration_ms = ?, screenshot = ? WHERE id = ?')\r\n          .run('failed', logs, duration, screenshotPath, runId);\r\n\r\n        return NextResponse.json({ success: true, result: false, logs: logs.split('\\n'), screenshot: screenshotPath });\r\n    }\r\n\r\n  } catch (error: any) {\r\n    if (runId) {\r\n        db.prepare('UPDATE test_runs SET status = ?, logs = ? WHERE id = ?').run('failed', error.message, runId);\r\n    }\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\tests\\run\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[810,813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[810,813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { TestRunner, TestStep } from '@/lib/test-runner';\r\nimport { runManager } from '@/lib/run-manager';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n    const steps: TestStep[] = body.steps;\r\n\r\n    if (!steps || !Array.isArray(steps)) {\r\n      return NextResponse.json({ error: 'Invalid steps format' }, { status: 400 });\r\n    }\r\n\r\n    const data = body.data || {};\r\n    const runner = new TestRunner();\r\n    const runKey = `adhoc-${Date.now()}`;\r\n    runManager.register(runKey, runner);\r\n    \r\n    try {\r\n        const result = await runner.runFlow(0, steps, data);\r\n        return NextResponse.json({ success: true, result });\r\n    } finally {\r\n        runManager.unregister(runKey);\r\n    }\r\n  } catch (error: any) {\r\n    console.error('Test Runner Error:', error);\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\tests\\stop\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[679,682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[679,682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { runManager } from '@/lib/run-manager';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { all = false } = await req.json().catch(() => ({}));\r\n    \r\n    if (all) {\r\n        await runManager.stopAll();\r\n        return NextResponse.json({ success: true, message: 'All active tests stopped' });\r\n    }\r\n\r\n    // For now, we mainly support stopping all or the current active one via run-manager\r\n    // Specific runId support can be added if we tracked it in the UI\r\n    await runManager.stopAll(); \r\n    return NextResponse.json({ success: true, message: 'Tests stopped successfully' });\r\n\r\n  } catch (error: any) {\r\n    console.error('Stop Test Error:', error);\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\api\\visual\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_e' is defined but never used.","line":24,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_e' is defined but never used.","line":37,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1538,1541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1538,1541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport fs from 'fs/promises';\r\nimport path from 'path';\r\n\r\nconst SNAPSHOTS_DIR = path.join(process.cwd(), '../tests/snapshots');\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const { searchParams } = new URL(req.url);\r\n    const type = searchParams.get('type'); // baseline, actual, diff\r\n    const name = searchParams.get('name'); // snapshot name\r\n\r\n    if (type && name) {\r\n        // Return base64 of specific image\r\n        const subDir = type === 'baseline' ? 'baseline' : (type === 'actual' ? 'actual' : 'diffs');\r\n        const ext = type === 'diff' ? '.diff.png' : '.png';\r\n        const filePath = path.join(SNAPSHOTS_DIR, subDir, `${name}${ext}`);\r\n        \r\n        try {\r\n            const buffer = await fs.readFile(filePath);\r\n            const base64 = buffer.toString('base64');\r\n            return NextResponse.json({ success: true, image: `data:image/png;base64,${base64}` });\r\n        } catch (_e) {\r\n            return NextResponse.json({ error: 'File not found' }, { status: 404 });\r\n        }\r\n    }\r\n\r\n    // List all snapshots\r\n    const snapshots: string[] = [];\r\n    try {\r\n        const baselineDir = path.join(SNAPSHOTS_DIR, 'baseline');\r\n        const files = await fs.readdir(baselineDir);\r\n        files.forEach(f => {\r\n            if (f.endsWith('.png')) snapshots.push(f.replace('.png', ''));\r\n        });\r\n    } catch (_e) { /* ignore if dir doesn't exist */ }\r\n\r\n    return NextResponse.json({ success: true, snapshots });\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\manage\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[729,732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[729,732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[743,746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[743,746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1007,1010],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1007,1010],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1247,1250],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1247,1250],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1352,1355],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1352,1355],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6257,6260],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6257,6260],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6287,6290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6287,6290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6494,6497],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6494,6497],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":120,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10495,10498],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10495,10498],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10599,10602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10599,10602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":175,"column":37,"nodeType":"JSXOpeningElement","endLine":175,"endColumn":238},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":198,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16967,16970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16967,16970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":203,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17277,17280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17277,17280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":204,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":204,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17343,17346],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17343,17346],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17403,17406],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17403,17406],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":206,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17455,17458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17455,17458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":207,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17517,17520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17517,17520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_jobs' is assigned a value but never used.","line":208,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":208,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17568,17571],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17568,17571],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_suites' is assigned a value but never used.","line":209,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":209,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":209,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":209,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17640,17643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17640,17643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_snapshots' is assigned a value but never used.","line":210,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":210,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fetchSnapshots' is assigned a value but never used.","line":222,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":222,"endColumn":25},{"ruleId":"react/jsx-no-comment-textnodes","severity":2,"message":"Comments inside children section of tag should be placed inside braces","line":328,"column":23,"nodeType":"JSXText","messageId":"putCommentInBraces","endLine":331,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":348,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":348,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25159,25162],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25159,25162],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_e' is defined but never used.","line":390,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":390,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Editor from '@monaco-editor/react';\r\nimport { \r\n    XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, \r\n    BarChart, Bar, AreaChart, Area \r\n} from 'recharts';\r\nimport { Loader2, Terminal, FileCode, Save, Plus, FolderOpen, LayoutTemplate, Trash2, Clock, Rocket, Monitor, Layout, History, CheckCircle2, XCircle, Wand2, Calendar, Code2, Sparkles } from 'lucide-react';\r\nimport { clsx, type ClassValue } from 'clsx';\r\nimport { twMerge } from 'tailwind-merge';\r\n\r\nfunction cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\n// Helper Components\r\n\r\nconst AnalyticsDashboard = ({ stats, history }: { stats: any, history: any[] }) => {\r\n    const timelineData = history?.length > 0 ? history.map(run => ({\r\n        timestamp: run.created_at || run.timestamp,\r\n        duration: (run.duration_ms || run.duration) / 1000,\r\n        status: run.status === 'passed' || run.results?.every((r:any) => r.success) ? 1 : 0\r\n    })) : [];\r\n    const trendData = history?.length > 0 ? history.slice(-7).map(run => ({\r\n        name: new Date(run.timestamp || run.created_at).toLocaleDateString(),\r\n        success: run.results?.filter((r: any) => r.success).length || (run.status === 'passed' ? 1 : 0),\r\n        failed: run.results?.filter((r: any) => !r.success).length || (run.status === 'failed' ? 1 : 0),\r\n        time: (run.duration || run.duration_ms) / 1000\r\n    })) : [];\r\n    return (\r\n        <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                {[\r\n                    { label: 'AVG SUCCESS RATE', value: '94%', icon: CheckCircle2, color: 'text-emerald-400', bg: 'bg-emerald-500/10' },\r\n                    { label: 'TOTAL RUNS (24H)', value: stats?.total || '128', icon: Rocket, color: 'text-blue-400', bg: 'bg-blue-500/10' },\r\n                    { label: 'AVG DURATION', value: stats?.avg_duration ? `${(stats.avg_duration/1000).toFixed(1)}s` : '14.2s', icon: Clock, color: 'text-purple-400', bg: 'bg-purple-500/10' },\r\n                    { label: 'FLAKY TESTS', value: '3', icon: Wand2, color: 'text-yellow-400', bg: 'bg-yellow-500/10' },\r\n                ].map((stat, i) => (\r\n                    <div key={i} className=\"bg-[#111111] border border-neutral-800/50 p-6 rounded-[2rem] shadow-2xl hover:border-neutral-700 transition-all flex flex-col justify-between h-40\">\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <span className=\"text-[11px] font-bold text-neutral-500 tracking-widest\">{stat.label}</span>\r\n                            <div className={cn(\"p-2 rounded-xl\", stat.bg)}><stat.icon className={cn(\"w-4 h-4\", stat.color)} /></div>\r\n                        </div>\r\n                        <div className=\"text-4xl font-bold text-white tracking-tight\">{stat.value}</div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 pt-4\">\r\n                <div className=\"bg-[#111111] border border-neutral-800/50 p-8 rounded-[2rem] shadow-2xl\">\r\n                    <h4 className=\"text-sm font-bold text-neutral-200 flex items-center space-x-3 mb-10\">\r\n                        <History className=\"w-5 h-5 text-emerald-500\" />\r\n                        <span>Execution Success Trends</span>\r\n                    </h4>\r\n                    <div className=\"h-[280px]\"><ResponsiveContainer width=\"100%\" height=\"100%\"><AreaChart data={trendData}><defs><linearGradient id=\"colorSuccess\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\"><stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.3}/><stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0}/></linearGradient></defs><CartesianGrid strokeDasharray=\"3 3\" stroke=\"#262626\" vertical={false} /><XAxis dataKey=\"name\" stroke=\"#525252\" fontSize={10} axisLine={false} tickLine={false} /><YAxis stroke=\"#525252\" fontSize={10} axisLine={false} tickLine={false} /><Tooltip contentStyle={{ backgroundColor: '#171717', border: '1px solid #262626', borderRadius: '12px' }} itemStyle={{ fontSize: '10px' }}/><Area type=\"monotone\" dataKey=\"success\" stroke=\"#10b981\" fillOpacity={1} fill=\"url(#colorSuccess)\" strokeWidth={2} /><Area type=\"monotone\" dataKey=\"failed\" stroke=\"#ef4444\" fill=\"transparent\" strokeWidth={2} /></AreaChart></ResponsiveContainer></div>\r\n                </div>\r\n                <div className=\"bg-[#111111] border border-neutral-800/50 p-8 rounded-[2rem] shadow-2xl\">\r\n                    <h4 className=\"text-sm font-bold text-neutral-200 flex items-center space-x-3 mb-10\">\r\n                        <Clock className=\"w-5 h-5 text-blue-500\" />\r\n                        <span>Run Duration (Seconds)</span>\r\n                    </h4>\r\n                    <div className=\"h-[280px]\"><ResponsiveContainer width=\"100%\" height=\"100%\"><BarChart data={trendData}><CartesianGrid strokeDasharray=\"3 3\" stroke=\"#262626\" vertical={false} /><XAxis dataKey=\"name\" stroke=\"#525252\" fontSize={10} axisLine={false} tickLine={false} /><YAxis stroke=\"#525252\" fontSize={10} axisLine={false} tickLine={false} /><Tooltip cursor={{fill: '#262626'}} contentStyle={{ backgroundColor: '#171717', border: '1px solid #262626', borderRadius: '12px' }}/><Bar dataKey=\"time\" fill=\"#3b82f6\" radius={[6, 6, 0, 0]} barSize={20} /></BarChart></ResponsiveContainer></div>\r\n                </div>\r\n            </div>\r\n            <div className=\"bg-neutral-900 border border-neutral-800 p-6 rounded-2xl shadow-xl\">\r\n                <h4 className=\"text-sm font-bold text-neutral-300 flex items-center space-x-2 mb-6\"><Calendar className=\"w-4 h-4 text-purple-500\" /><span>Performance Heatmap</span></h4>\r\n                <div className=\"grid grid-cols-12 gap-1 h-8\">{timelineData.slice(-48).map((run, i) => (<div key={i} className={cn(\"h-full rounded-sm transition-all\", run.status ? \"bg-emerald-500/50 hover:bg-emerald-400\" : \"bg-red-500/50 hover:bg-red-400\")} title={`${new Date(run.timestamp).toLocaleString()}\\nDuration: ${run.duration}s`}/>))}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst NoCodeStepBuilder = ({ steps, onStepsChange }: { steps: any[], onStepsChange: (steps: any[]) => void }) => {\r\n    const addStep = () => onStepsChange([...steps, { id: Date.now().toString(), action: 'click', value: '', selector: '' }]);\r\n    const updateStep = (id: string, field: string, val: any) => onStepsChange(steps.map(s => s.id === id ? { ...s, [field]: val } : s));\r\n    const removeStep = (id: string) => onStepsChange(steps.filter(s => s.id !== id));\r\n    return (\r\n        <div className=\"space-y-3 p-4 bg-neutral-900 border border-neutral-800 rounded-2xl shadow-xl mb-4\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n                <h4 className=\"text-xs font-bold text-neutral-500 uppercase tracking-widest\">Logic Builder</h4>\r\n                <button onClick={addStep} className=\"p-1 hover:bg-neutral-800 rounded text-emerald-500\"><Plus className=\"w-3.5 h-3.5\" /></button>\r\n            </div>\r\n            <div className=\"space-y-4 max-h-[300px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-neutral-800\">\r\n                {steps.map((step, idx) => (\r\n                    <div key={step.id || `step-${idx}`} className=\"group relative flex items-center space-x-3 bg-neutral-950/50 p-3 rounded-xl border border-neutral-800 hover:border-neutral-700 transition-all\">\r\n                        <span className=\"text-[10px] font-bold text-neutral-700 w-4\">{idx + 1}</span>\r\n                        <select value={step.action} onChange={(e) => updateStep(step.id, 'action', e.target.value)} className=\"bg-neutral-900 border border-neutral-800 rounded px-2 py-1 text-[10px] text-blue-400 outline-none\">\r\n                            <option value=\"goto\">Navigate</option><option value=\"click\">Click</option><option value=\"type\">Type</option><option value=\"assertion\">Verify</option><option value=\"waitFor\">Wait For</option>\r\n                        </select>\r\n                        <input type=\"text\" placeholder=\"Value / Selector\" value={step.value || step.selector} onChange={(e) => updateStep(step.id, step.action === 'goto' || step.action === 'assertion' ? 'value' : 'selector', e.target.value)} className=\"flex-1 bg-transparent border-b border-neutral-800 focus:border-emerald-500 text-[11px] text-neutral-300 outline-none py-1\" />\r\n                        <button onClick={() => removeStep(step.id)} className=\"opacity-0 group-hover:opacity-100 p-1 text-neutral-600 hover:text-red-400 transition-all\"><Trash2 className=\"w-3 h-3\"/></button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst TerminalWindow = ({ logs, onClear }: { logs: string[], onClear: () => void }) => {\r\n    const formatLog = (log: string) => {\r\n        if (log.toLowerCase().includes('failed') || log.toLowerCase().includes('error')) return <span className=\"text-red-400 font-bold\">{log}</span>;\r\n        if (log.toLowerCase().includes('passed') || log.toLowerCase().includes('successfully')) return <span className=\"text-emerald-400 font-bold\">{log}</span>;\r\n        if (log.toLowerCase().includes('executing')) return <span className=\"text-blue-400\">{log}</span>;\r\n        return <span className=\"text-neutral-400\">{log}</span>;\r\n    };\r\n    return (\r\n        <div className=\"mt-6 border border-neutral-800 rounded-xl overflow-hidden bg-black shadow-2xl relative\">\r\n            <div className=\"bg-neutral-900/80 px-4 py-2 border-b border-neutral-800 flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-2\"><Terminal className=\"w-4 h-4 text-emerald-500\" /><span className=\"text-[10px] uppercase font-bold text-neutral-400 tracking-widest\">Terminal Output</span></div>\r\n                <button onClick={onClear} className=\"text-neutral-500 hover:text-neutral-300 text-[9px] uppercase\">Clear</button>\r\n            </div>\r\n            <div className=\"h-[300px] overflow-y-auto p-4 font-mono text-[11px] leading-relaxed\">\r\n                <div className=\"space-y-1\">{logs.map((log, i) => (<div key={i} className=\"flex space-x-2 group\"><span className=\"text-neutral-600 select-none min-w-[20px]\">{i + 1}</span><div className=\"break-all\">{formatLog(log)}</div></div>))}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ExecutionHistory = ({ runs, onOpenScript }: { runs: any[], onOpenScript: (path: string) => void }) => {\r\n    const [selectedRun, setSelectedRun] = useState<any>(null);\r\n    return (\r\n        <div className=\"grid grid-cols-12 gap-6 h-full\">\r\n            <div className=\"col-span-5 bg-[#111111] border border-neutral-800/50 rounded-3xl overflow-hidden flex flex-col shadow-2xl\">\r\n                <div className=\"p-4 border-b border-neutral-800 bg-black/20 flex items-center justify-between\">\r\n                    <span className=\"text-[10px] font-black uppercase text-neutral-500 tracking-[0.2em]\">Execution Logs</span>\r\n                    <History className=\"w-4 h-4 text-neutral-700\" />\r\n                </div>\r\n                <div className=\"flex-1 overflow-y-auto p-2 space-y-2\">\r\n                    {runs.map(run => (\r\n                        <button key={run.id} onClick={() => setSelectedRun(run)} className={cn(\"w-full text-left p-4 rounded-2xl border transition-all flex flex-col space-y-2\", selectedRun?.id === run.id ? \"bg-white/5 border-neutral-700\" : \"bg-neutral-900/30 border-transparent hover:border-neutral-800\")}>\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <span className={cn(\"text-[9px] font-black px-2 py-0.5 rounded uppercase tracking-tighter\", run.status === 'passed' ? \"bg-emerald-500/10 text-emerald-500\" : \"bg-red-500/10 text-red-500\")}>{run.status}</span>\r\n                                <span className=\"text-[10px] text-neutral-600 font-mono italic\">{new Date(run.created_at).toLocaleString()}</span>\r\n                            </div>\r\n                            <div className=\"text-xs font-bold text-neutral-300 truncate\">{run.flow_name || 'Ad-Hoc Script'}</div>\r\n                            <div className=\"text-[10px] text-neutral-500 flex items-center space-x-2\"><Clock className=\"w-3 h-3\" /><span>{(run.duration_ms / 1000).toFixed(2)}s</span></div>\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"col-span-7 space-y-6 overflow-y-auto pr-2 scrollbar-none\">\r\n                {selectedRun ? (\r\n                    <div className=\"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500 pb-10\">\r\n                        <div className=\"bg-[#111111] border border-neutral-800/50 p-6 rounded-3xl shadow-2xl\">\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <h4 className=\"text-xs font-black uppercase text-neutral-500 tracking-widest\">Run Details</h4>\r\n                                {selectedRun.test_path && (\r\n                                    <button onClick={() => onOpenScript(selectedRun.test_path)} className=\"text-[10px] font-bold text-purple-400 hover:text-purple-300 flex items-center space-x-1.5 transition-colors\">\r\n                                        <Code2 className=\"w-3.5 h-3.5\" />\r\n                                        <span>OPEN SCRIPT IN EDITOR</span>\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"grid grid-cols-3 gap-4\">\r\n                                <div className=\"p-4 bg-neutral-900/50 rounded-2xl border border-neutral-800\">\r\n                                    <div className=\"text-[9px] text-neutral-600 mb-1\">STATUS</div>\r\n                                    <div className={cn(\"text-lg font-black\", selectedRun.status === 'passed' ? \"text-emerald-500\" : \"text-red-500\")}>{selectedRun.status.toUpperCase()}</div>\r\n                                </div>\r\n                                <div className=\"p-4 bg-neutral-900/50 rounded-2xl border border-neutral-800\">\r\n                                    <div className=\"text-[9px] text-neutral-600 mb-1\">DURATION</div>\r\n                                    <div className=\"text-lg font-black text-blue-400\">{(selectedRun.duration_ms / 1000).toFixed(2)}s</div>\r\n                                </div>\r\n                                <div className=\"p-4 bg-neutral-900/50 rounded-2xl border border-neutral-800\">\r\n                                    <div className=\"text-[9px] text-neutral-600 mb-1\">TIMESTAMP</div>\r\n                                    <div className=\"text-[11px] font-bold text-neutral-400\">{new Date(selectedRun.created_at).toLocaleTimeString()}</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {selectedRun.screenshot && (\r\n                            <div className=\"bg-[#111111] border border-neutral-800/50 p-6 rounded-3xl shadow-2xl\">\r\n                                <h4 className=\"text-xs font-black uppercase text-neutral-500 tracking-widest mb-4\">Final State Screenshot</h4>\r\n                                <div className=\"rounded-2xl overflow-hidden border border-neutral-800 bg-black\">\r\n                                    <img src={selectedRun.screenshot} className=\"w-full h-auto cursor-zoom-in hover:scale-[1.02] transition-transform\" alt=\"Test Screenshot\" onClick={() => window.open(selectedRun.screenshot, '_blank')} />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"bg-black border border-neutral-800 rounded-3xl p-6 shadow-2xl\">\r\n                             <h4 className=\"text-xs font-black uppercase text-neutral-500 tracking-widest mb-4\">Detailed Logs</h4>\r\n                             <pre className=\"text-[11px] font-mono text-neutral-400 overflow-x-auto whitespace-pre-wrap leading-relaxed\">{selectedRun.logs}</pre>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"h-full flex flex-col items-center justify-center text-neutral-700 space-y-4 italic opacity-50\">\r\n                        <div className=\"p-8 bg-neutral-900/50 rounded-full border border-neutral-800\"><History className=\"w-16 h-16\" /></div>\r\n                        <p className=\"text-sm\">Select a test run from the history to view detailed reports and screenshots</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function ManagementPage() {\r\n    const [activeTab, setActiveTab] = useState<'tests' | 'pom' | 'analytics' | 'history' | 'cicd' | 'bdd' | 'suites'>('tests');\r\n    const [files, setFiles] = useState<any[]>([]);\r\n    const [selectedFile, setSelectedFile] = useState<string | null>(null);\r\n    const [fileContent, setFileContent] = useState('');\r\n    const [isRunning, setIsRunning] = useState(false);\r\n    const [terminalLogs, setTerminalLogs] = useState<string[]>([]);\r\n    const [pages, setPages] = useState<any[]>([]);\r\n    const [selectedPage, setSelectedPage] = useState<any>(null);\r\n    const [selectors, setSelectors] = useState<any[]>([]);\r\n    const [stats, setStats] = useState<any>(null);\r\n    const [runHistory, setRunHistory] = useState<any[]>([]);\r\n    const [_jobs, setJobs] = useState<any[]>([]);\r\n    const [_suites, setSuites] = useState<{ [tag: string]: any[] }>({});\r\n    const [_snapshots, setSnapshots] = useState<string[]>([]);\r\n\r\n    useEffect(() => {\r\n        fetchFiles(); fetchPages(); fetchJobs(); fetchSuites(); fetchReports();\r\n    }, []);\r\n\r\n    const fetchFiles = async () => { const res = await fetch('/api/files'); const json = await res.json(); if (json.success) setFiles(json.files); };\r\n    const fetchPages = async () => { const res = await fetch('/api/pom?type=pages'); const json = await res.json(); if (json.success) setPages(json.data); };\r\n    const fetchSelectors = async (pageId: number) => { const res = await fetch(`/api/pom?type=selectors&pageId=${pageId}`); const json = await res.json(); if (json.success) setSelectors(json.data); };\r\n    const fetchJobs = async () => { const res = await fetch('/api/jobs'); const json = await res.json(); if (json.success) setJobs(json.jobs); };\r\n    const fetchSuites = async () => { const res = await fetch('/api/suites'); const json = await res.json(); if (json.success) setSuites(json.suites); };\r\n    const fetchReports = async () => { const res = await fetch('/api/reports'); const json = await res.json(); if (json.success) { setStats(json.stats); setRunHistory(json.runs); } };\r\n    const fetchSnapshots = async () => { const res = await fetch('/api/visual'); const json = await res.json(); if (json.success) setSnapshots(json.snapshots); };\r\n    \r\n    const loadFile = async (path: string) => { \r\n        setSelectedFile(path); \r\n        const res = await fetch(`/api/files/read?path=${path}`); \r\n        const json = await res.json(); \r\n        if (json.success) setFileContent(typeof json.content === 'string' ? json.content : (json.content.raw || JSON.stringify(json.content, null, 2))); \r\n    };\r\n\r\n    const saveFile = async () => {\r\n        if (!selectedFile) return;\r\n        try {\r\n            const res = await fetch('/api/files', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ path: selectedFile, content: fileContent })\r\n            });\r\n            const json = await res.json();\r\n            if (json.success) setTerminalLogs(prev => [...prev, `Saved: ${selectedFile}`]);\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    const createFile = async () => {\r\n        const name = prompt('Enter file name (e.g. login.py):');\r\n        if (!name) return;\r\n        const res = await fetch('/api/files', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ path: name, content: name.endsWith('.json') ? '[]' : '# New Test Script' })\r\n        });\r\n        if ((await res.json()).success) fetchFiles();\r\n    };\r\n\r\n    const deleteFile = async (path: string, e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        if (!confirm(`Delete ${path}?`)) return;\r\n        const res = await fetch(`/api/files?path=${path}`, { method: 'DELETE' });\r\n        if ((await res.json()).success) {\r\n            if (selectedFile === path) { setSelectedFile(null); setFileContent(''); }\r\n            fetchFiles();\r\n        }\r\n    };\r\n\r\n    const createPage = async () => {\r\n        const name = prompt('Enter page name:');\r\n        const url = prompt('Enter base URL:');\r\n        if (!name) return;\r\n        const res = await fetch('/api/pom', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ type: 'page', name, url, description: '' })\r\n        });\r\n        if ((await res.json()).success) fetchPages();\r\n    };\r\n\r\n    const deletePage = async (id: number, e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        if (!confirm('Delete this page and its selectors?')) return;\r\n        const res = await fetch(`/api/pom?type=page&id=${id}`, { method: 'DELETE' });\r\n        if ((await res.json()).success) {\r\n            if (selectedPage?.id === id) setSelectedPage(null);\r\n            fetchPages();\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (selectedPage) fetchSelectors(selectedPage.id);\r\n    }, [selectedPage]);\r\n\r\n    const addSelector = async () => {\r\n        if (!selectedPage) return;\r\n        const name = prompt('Selector Name:');\r\n        const selectorValue = prompt('Selector (CSS/XPath):');\r\n        if (!name || !selectorValue) return;\r\n        const res = await fetch('/api/pom', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ type: 'selector', pageId: selectedPage.id, name, selector: selectorValue, elementType: 'button' })\r\n        });\r\n        if ((await res.json()).success) fetchSelectors(selectedPage.id);\r\n    };\r\n\r\n    const deleteSelector = async (id: number) => {\r\n        const res = await fetch(`/api/pom?type=selector&id=${id}`, { method: 'DELETE' });\r\n        if ((await res.json()).success) fetchSelectors(selectedPage.id);\r\n    };\r\n\r\n    const runTest = async () => {\r\n        if (!selectedFile) return;\r\n        setIsRunning(true); setTerminalLogs([\"Initializing execution...\"]);\r\n        try {\r\n            const res = await fetch('/api/tests/exec', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ path: selectedFile }) });\r\n            const json = await res.json();\r\n            setTerminalLogs(prev => [...prev, ...(json.logs || [json.error || 'Execution Error'])]);\r\n            fetchReports(); // Refresh history\r\n        } finally { setIsRunning(false); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-neutral-950 text-neutral-100 p-6 flex flex-col space-y-6\">\r\n            <header className=\"flex items-center justify-between border-b border-neutral-800 pb-6\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                    <div className=\"p-3 bg-purple-600 rounded-lg shadow-lg shadow-purple-900/20 hover:scale-105 transition-transform\"><Layout className=\"w-6 h-6 text-white\" /></div>\r\n                    <div><h1 className=\"text-2xl font-bold text-white tracking-tight\">Automation Management</h1><p className=\"text-neutral-500 text-sm font-medium\">Unified Control Plane for Test Ecosystem</p></div>\r\n                </div>\r\n\r\n// ... inside the component ...\r\n                <div className=\"flex items-center space-x-3\">\r\n                    <Link href=\"/\" className=\"px-4 py-2 bg-neutral-900 hover:bg-neutral-800 text-neutral-400 hover:text-white rounded-lg text-sm font-bold border border-neutral-800 transition-all flex items-center space-x-2\">\r\n                        <Monitor className=\"w-4 h-4\" /><span>Live Dashboard</span>\r\n                    </Link>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"flex bg-neutral-900/50 border border-neutral-100/5 backdrop-blur-md rounded-2xl p-1.5 w-fit self-center shadow-2xl\">\r\n                {[\r\n                    { id: 'tests', label: 'Test Scripts', icon: FileCode },\r\n                    { id: 'pom', label: 'Page Objects', icon: LayoutTemplate },\r\n                    { id: 'analytics', label: 'Analytics', icon: History },\r\n                    { id: 'history', label: 'History', icon: Clock },\r\n                    { id: 'cicd', label: 'CI/CD', icon: Rocket },\r\n                    { id: 'bdd', label: 'BDD', icon: Sparkles },\r\n                    { id: 'suites', label: 'Suites', icon: Layout },\r\n                ].map(tab => (\r\n                    <button key={tab.id} onClick={() => setActiveTab(tab.id as any)} className={cn(\"flex items-center space-x-2 px-6 py-2.5 rounded-xl text-sm font-bold transition-all duration-300\", activeTab === tab.id ? \"bg-white text-black shadow-[0_0_20px_rgba(255,255,255,0.15)] scale-105\" : \"text-neutral-500 hover:text-neutral-100 hover:bg-white/5\")}>\r\n                        <tab.icon className=\"w-4 h-4\" /><span>{tab.label}</span>\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <main className=\"grid grid-cols-12 gap-8 flex-1\">\r\n                <aside className=\"col-span-3 bg-neutral-900/80 backdrop-blur-sm border border-neutral-800 rounded-3xl overflow-hidden flex flex-col h-[750px] shadow-2xl\">\r\n                    <div className=\"p-5 border-b border-neutral-800 flex items-center justify-between\">\r\n                        <span className=\"font-black text-[10px] uppercase text-neutral-600 tracking-[0.2em]\">Management Explorer</span>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                             {activeTab === 'tests' && <button onClick={createFile} className=\"p-1 hover:bg-neutral-800 rounded text-purple-400\" title=\"New Script\"><Plus className=\"w-4 h-4\" /></button>}\r\n                             {activeTab === 'pom' && <button onClick={createPage} className=\"p-1 hover:bg-neutral-800 rounded text-emerald-400\" title=\"New Page\"><Plus className=\"w-4 h-4\" /></button>}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex-1 overflow-y-auto p-3 space-y-1\">\r\n                        {activeTab === 'tests' && files.map(file => (\r\n                            <div key={file.path} className=\"group relative\">\r\n                                <button onClick={() => loadFile(file.path)} className={cn(\"w-full text-left px-4 py-3 rounded-2xl text-sm flex items-center space-x-3 transition-all duration-200 group-hover:pr-10\", selectedFile === file.path ? \"bg-purple-600 text-white shadow-lg shadow-purple-900/40\" : \"hover:bg-neutral-800/50 text-neutral-400\")}>\r\n                                    <FileCode className={cn(\"w-4 h-4\", selectedFile === file.path ? \"text-white\" : \"text-purple-500\")} /><span className=\"truncate font-medium\">{file.name}</span>\r\n                                </button>\r\n                                <button onClick={(e) => deleteFile(file.path, e)} className=\"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 p-1.5 hover:bg-red-500/10 text-neutral-600 hover:text-red-400 rounded-lg transition-all\"><Trash2 className=\"w-3.5 h-3.5\" /></button>\r\n                            </div>\r\n                        ))}\r\n                        {activeTab === 'pom' && pages.map(page => (\r\n                            <div key={page.id} className=\"group relative\">\r\n                                <button onClick={() => setSelectedPage(page)} className={cn(\"w-full text-left px-4 py-3 rounded-2xl text-sm flex items-center space-x-3 transition-all duration-200 group-hover:pr-10\", selectedPage?.id === page.id ? \"bg-emerald-600 text-white shadow-lg shadow-emerald-900/40\" : \"hover:bg-neutral-800/50 text-neutral-400\")}>\r\n                                    <LayoutTemplate className={cn(\"w-4 h-4\", selectedPage?.id === page.id ? \"text-white\" : \"text-emerald-500\")} /><span className=\"truncate font-medium\">{page.name}</span>\r\n                                </button>\r\n                                <button onClick={(e) => deletePage(page.id, e)} className=\"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 p-1.5 hover:bg-red-500/10 text-neutral-600 hover:text-red-400 rounded-lg transition-all\"><Trash2 className=\"w-3.5 h-3.5\" /></button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </aside>\r\n\r\n                <section className=\"col-span-9 space-y-8 h-[750px] overflow-y-auto pr-2 scrollbar-none\">\r\n                    {activeTab === 'tests' && selectedFile ? (\r\n                        <div className=\"flex flex-col space-y-6 animate-in fade-in slide-in-from-right-8 duration-500\">\r\n                            {selectedFile.endsWith('.json') && (() => {\r\n                                try {\r\n                                    const steps = JSON.parse(fileContent || '[]');\r\n                                    return <NoCodeStepBuilder steps={steps} onStepsChange={(newSteps) => setFileContent(JSON.stringify(newSteps, null, 2))} />;\r\n                                } catch (_e) {\r\n                                    return (\r\n                                        <div className=\"p-4 bg-red-900/20 border border-red-900/50 rounded-2xl text-red-400 text-xs flex items-center space-x-2\">\r\n                                            <XCircle className=\"w-4 h-4\" />\r\n                                            <span>Invalid JSON format in file. No-Code Builder disabled.</span>\r\n                                        </div>\r\n                                    );\r\n                                }\r\n                            })()}\r\n                            <div className=\"bg-neutral-900 border border-neutral-800 rounded-3xl overflow-hidden shadow-2xl flex flex-col\">\r\n                                <div className=\"px-6 py-4 border-b border-neutral-800 flex justify-between items-center bg-black/20\">\r\n                                    <div className=\"flex items-center space-x-3\"><div className=\"p-2 bg-purple-500/10 rounded-lg\"><FileCode className=\"w-4 h-4 text-purple-400\" /></div><span className=\"font-mono text-xs text-neutral-300\">{selectedFile}</span></div>\r\n                                    <div className=\"flex items-center space-x-4\">\r\n                                        <button onClick={saveFile} className=\"p-2 hover:bg-white/5 rounded-lg text-neutral-400 hover:text-white transition-all\" title=\"Save File\"><Save className=\"w-4 h-4\" /></button>\r\n                                        <button onClick={runTest} disabled={isRunning} className=\"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white px-6 py-2 rounded-xl text-xs font-black transition-all shadow-xl shadow-purple-900/20 active:scale-95 flex items-center space-x-2\">\r\n                                            {isRunning ? <Loader2 className=\"w-4 h-4 animate-spin\"/> : <Rocket className=\"w-4 h-4\" />}<span>LAUNCH EXECUTION</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"h-[450px]\"><Editor height=\"100%\" theme=\"vs-dark\" language={selectedFile.endsWith('.py') ? 'python' : 'javascript'} value={fileContent} onChange={v => setFileContent(v || '')} options={{ minimap: { enabled: false }, fontSize: 13, padding: { top: 20 } }} /></div>\r\n                            </div>\r\n                            <TerminalWindow logs={terminalLogs} onClear={() => setTerminalLogs([])} />\r\n                        </div>\r\n                    ) : activeTab === 'pom' && selectedPage ? (\r\n                        <div className=\"space-y-6 animate-in fade-in slide-in-from-right-8 duration-500\">\r\n                             <div className=\"bg-[#111111] border border-neutral-800/50 p-8 rounded-[2rem] shadow-2xl\">\r\n                                <div className=\"flex items-center justify-between mb-8\">\r\n                                    <div className=\"flex items-center space-x-4\">\r\n                                        <div className=\"p-3 bg-emerald-500/10 rounded-2xl\"><LayoutTemplate className=\"w-6 h-6 text-emerald-500\" /></div>\r\n                                        <div>\r\n                                            <h2 className=\"text-xl font-bold text-white\">{selectedPage.name}</h2>\r\n                                            <p className=\"text-xs text-neutral-500 font-mono italic\">{selectedPage.url || 'No Base URL'}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <button onClick={addSelector} className=\"flex items-center space-x-2 px-6 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-xs font-black transition-all shadow-lg shadow-emerald-900/20\"><Plus className=\"w-4 h-4\" /><span>ADD SELECTOR</span></button>\r\n                                </div>\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                    {selectors.map(sel => (\r\n                                        <div key={sel.id} className=\"group p-5 bg-neutral-900/50 border border-neutral-800 rounded-2xl hover:border-emerald-500/30 transition-all flex items-center justify-between\">\r\n                                            <div className=\"space-y-1\">\r\n                                                <div className=\"text-[11px] font-black uppercase text-neutral-500 tracking-widest\">{sel.name}</div>\r\n                                                <div className=\"text-xs font-mono text-emerald-400 bg-emerald-400/5 px-2 py-0.5 rounded border border-emerald-400/10\">{sel.selector}</div>\r\n                                            </div>\r\n                                            <button onClick={() => deleteSelector(sel.id)} className=\"opacity-0 group-hover:opacity-100 p-2 text-neutral-600 hover:text-red-400 transition-all\"><Trash2 className=\"w-4 h-4\"/></button>\r\n                                        </div>\r\n                                    ))}\r\n                                    {selectors.length === 0 && <div className=\"col-span-2 text-center py-10 text-neutral-600 italic text-sm\">No selectors defined for this page</div>}\r\n                                </div>\r\n                             </div>\r\n                        </div>\r\n                    ) : activeTab === 'analytics' ? (\r\n                        <div className=\"animate-in fade-in slide-in-from-right-8 duration-700\">\r\n                             <AnalyticsDashboard stats={stats} history={runHistory} />\r\n                        </div>\r\n                    ) : activeTab === 'history' ? (\r\n                        <div className=\"h-[750px] animate-in fade-in slide-in-from-right-8 duration-700\">\r\n                             <ExecutionHistory runs={runHistory} onOpenScript={(path) => {\r\n                                 setActiveTab('tests');\r\n                                 loadFile(path);\r\n                             }} />\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"h-full flex flex-col items-center justify-center text-neutral-600 space-y-4 animate-in fade-in duration-700\">\r\n                             <div className=\"p-8 bg-neutral-900/50 rounded-full border border-neutral-800 shadow-inner\"><FolderOpen className=\"w-16 h-16 opacity-10\" /></div>\r\n                             <p className=\"text-sm font-medium tracking-wide\">Select a module from the explorer to begin management</p>\r\n                        </div>\r\n                    )}\r\n                </section>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\app\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":38,"column":25,"nodeType":"JSXOpeningElement","endLine":38,"endColumn":116},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":43,"column":29,"nodeType":"JSXOpeningElement","endLine":43,"endColumn":124},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":62,"column":21,"nodeType":"JSXOpeningElement","endLine":62,"endColumn":91},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'stats' is defined but never used.","line":73,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3877,3880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3877,3880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3891,3894],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3891,3894],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3970,3973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3970,3973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4158,4161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4158,4161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4758,4761],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4758,4761],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4862,4865],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4862,4865],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12073,12076],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12073,12076],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":221,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12726,12729],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12726,12729],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":268,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15074,15077],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15074,15077],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":268,"column":93,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15104,15107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15104,15107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":274,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":274,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15360,15363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15360,15363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":381,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":381,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22083,22086],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22083,22086],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":394,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":394,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22625,22628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22625,22628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":412,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":412,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23285,23288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23285,23288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'testResult' is assigned a value but never used.","line":415,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":415,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":415,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":415,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23471,23474],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23471,23474],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":420,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":420,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23722,23725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23722,23725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":421,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":421,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23781,23784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23781,23784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":424,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":424,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23846,23849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23846,23849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":425,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":425,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23909,23912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23909,23912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":426,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":426,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23966,23969],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23966,23969],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":427,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":427,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24023,24026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24023,24026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":428,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":428,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24080,24083],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24080,24083],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setBddFeatures' is assigned a value but never used.","line":429,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":429,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":431,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":431,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24255,24258],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24255,24258],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dataPreview' is assigned a value but never used.","line":433,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":433,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":433,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24388,24391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24388,24391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":437,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":437,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24524,24527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24524,24527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":440,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":440,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24611,24614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24611,24614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":441,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":441,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24674,24677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24674,24677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":493,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":493,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26256,26259],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26256,26259],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":509,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":509,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26772,26775],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26772,26775],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":564,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":564,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28438,28441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28438,28441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":625,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":625,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":635,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":635,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":673,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":673,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32182,32185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32182,32185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":765,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":765,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34923,34926],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34923,34926],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":779,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":779,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35503,35506],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35503,35506],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":805,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":805,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[36517,36520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[36517,36520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":834,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":834,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37491,37494],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37491,37494],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":837,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":837,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37694,37697],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37694,37697],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":865,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":865,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[38533,38536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[38533,38536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":881,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":881,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":916,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":916,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":942,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":942,"endColumn":17},{"ruleId":"prefer-const","severity":1,"message":"'totalLogs' is never reassigned. Use 'const' instead.","line":967,"column":15,"nodeType":"Identifier","messageId":"useConst","endLine":967,"endColumn":34,"fix":{"range":[41908,41937],"text":"const totalLogs: string[] = [];"}},{"ruleId":"prefer-const","severity":1,"message":"'steps' is never reassigned. Use 'const' instead.","line":978,"column":19,"nodeType":"Identifier","messageId":"useConst","endLine":978,"endColumn":24,"fix":{"range":[42351,42435],"text":"const steps = typeof fileContent === 'string' ? JSON.parse(fileContent) : fileContent;"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1006,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1006,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[43612,43615],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[43612,43615],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":1044,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":1044,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'saveCI' is assigned a value but never used.","line":1049,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":1049,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'name' is assigned a value but never used.","line":1050,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":1050,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1583,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1583,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[82759,82762],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[82759,82762],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":1719,"column":83,"nodeType":"Identifier","messageId":"unusedVar","endLine":1719,"endColumn":84}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":57,"fixableErrorCount":0,"fixableWarningCount":2,"source":"'use strict';\n'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport Editor from '@monaco-editor/react';\nimport { \n    XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, \n    BarChart, Bar, AreaChart, Area \n} from 'recharts';\nimport { \n    Loader2, Play, Search, Terminal, FileCode, Save, Plus, Lock, ChevronDown, ChevronUp, Video, Eye, EyeOff, LayoutTemplate, Database, Trash2, StopCircle, Sparkles, Clock, Square, RefreshCw, ChevronRight, Rocket, Wand2, Layout, History, Calendar, FileText, CheckCircle2 \n} from 'lucide-react';\nimport { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nfunction cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nconst VisualComparisonSlider = ({ baseline, actual, diff }: { baseline?: string, actual?: string, diff?: string }) => {\n    const [sliderPos, setSliderPos] = useState(50);\n    const [selectedView, setSelectedView] = useState<'slider' | 'diff'>('slider');\n\n    if (!baseline || !actual) return <div className=\"h-64 flex items-center justify-center text-neutral-600 italic\">Select a snapshot to compare</div>;\n\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n                <div className=\"flex bg-neutral-800 rounded p-1\">\n                    <button onClick={() => setSelectedView('slider')} className={cn(\"px-3 py-1 text-xs rounded\", selectedView === 'slider' ? \"bg-neutral-700 text-white\" : \"text-neutral-500\")}>Slider</button>\n                    <button onClick={() => setSelectedView('diff')} className={cn(\"px-3 py-1 text-xs rounded\", selectedView === 'diff' ? \"bg-neutral-700 text-white\" : \"text-neutral-500\")}>Highlight Diff</button>\n                </div>\n            </div>\n\n            <div className=\"relative h-[400px] border border-neutral-800 rounded-2xl overflow-hidden bg-black flex items-center justify-center shadow-2xl\">\n                {selectedView === 'slider' ? (\n                    <>\n                        <img src={actual} className=\"absolute inset-0 w-full h-full object-contain\" alt=\"Actual\" />\n                        <div \n                            className=\"absolute inset-0 w-full h-full\" \n                            style={{ clipPath: `inset(0 ${100 - sliderPos}% 0 0)` }}\n                        >\n                            <img src={baseline} className=\"absolute inset-0 w-full h-full object-contain\" alt=\"Baseline\" />\n                        </div>\n                        <div \n                            className=\"absolute top-0 bottom-0 w-1 bg-white cursor-ew-resize z-10\" \n                            style={{ left: `${sliderPos}%` }}\n                        >\n                            <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-2xl flex items-center justify-center\">\n                                <Search className=\"w-4 h-4 text-black\" />\n                            </div>\n                        </div>\n                        <input \n                            type=\"range\" \n                            min=\"0\" max=\"100\" \n                            value={sliderPos} \n                            onChange={(e) => setSliderPos(parseInt(e.target.value))}\n                            className=\"absolute inset-0 opacity-0 cursor-ew-resize z-20\"\n                        />\n                    </>\n                ) : (\n                    <img src={diff} className=\"w-full h-full object-contain\" alt=\"Diff\" />\n                )}\n            </div>\n            <div className=\"flex justify-between text-[10px] uppercase font-bold text-neutral-500 tracking-widest px-2\">\n                <span>Baseline (Old)</span>\n                <span>Actual (Current)</span>\n            </div>\n        </div>\n    );\n};\n\nconst AnalyticsDashboard = ({ stats, history }: { stats: any, history: any[] }) => {\n    const timelineData = history?.length > 0 ? history.map((run: any) => ({\n        timestamp: run.created_at || run.timestamp,\n        duration: (run.duration_ms || run.duration) / 1000,\n        status: run.status === 'passed' || run.results?.every((r:any) => r.success) ? 1 : 0\n    })) : [\n        { timestamp: '2026-02-18T10:00:00Z', duration: 12, status: 1 },\n        { timestamp: '2026-02-18T10:15:00Z', duration: 15, status: 0 },\n        { timestamp: '2026-02-18T10:30:00Z', duration: 9, status: 1 },\n        { timestamp: '2026-02-18T10:45:00Z', duration: 11, status: 1 },\n        { timestamp: '2026-02-18T11:00:00Z', duration: 14, status: 1 }\n    ];\n\n    const trendData = history?.length > 0 ? history.slice(-7).map(run => ({\n        name: new Date(run.timestamp || run.created_at).toLocaleDateString(),\n        success: run.results?.filter((r: any) => r.success).length || (run.status === 'passed' ? 1 : 0),\n        failed: run.results?.filter((r: any) => !r.success).length || (run.status === 'failed' ? 1 : 0),\n        time: (run.duration || run.duration_ms) / 1000\n    })) : [\n        { name: 'Mon', success: 4, failed: 1, time: 12 },\n        { name: 'Tue', success: 6, failed: 0, time: 10 },\n        { name: 'Wed', success: 5, failed: 2, time: 15 },\n        { name: 'Thu', success: 8, failed: 0, time: 9 },\n        { name: 'Fri', success: 3, failed: 1, time: 18 },\n    ];\n\n    return (\n        <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n            {/* Top Row Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                {[\n                    { label: 'Avg Success Rate', value: '94%', icon: CheckCircle2, color: 'text-emerald-400', bg: 'bg-emerald-500/10' },\n                    { label: 'Total Runs (24h)', value: '128', icon: Rocket, color: 'text-blue-400', bg: 'bg-blue-500/10' },\n                    { label: 'Avg Duration', value: '14.2s', icon: Clock, color: 'text-purple-400', bg: 'bg-purple-500/10' },\n                    { label: 'Flaky Tests', value: '3', icon: Wand2, color: 'text-yellow-400', bg: 'bg-yellow-500/10' },\n                ].map((stat, i) => (\n                    <div key={i} className=\"bg-neutral-900 border border-neutral-800 p-4 rounded-2xl shadow-xl hover:border-neutral-700 transition-all\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"text-[10px] font-bold text-neutral-500 uppercase tracking-widest\">{stat.label}</span>\n                            <div className={cn(\"p-1.5 rounded-lg\", stat.bg)}>\n                                <stat.icon className={cn(\"w-3.5 h-3.5\", stat.color)} />\n                            </div>\n                        </div>\n                        <div className=\"text-2xl font-bold text-white\">{stat.value}</div>\n                    </div>\n                ))}\n            </div>\n\n            {/* Charts Row */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Execution Trends */}\n                <div className=\"bg-neutral-900 border border-neutral-800 p-6 rounded-2xl shadow-xl\">\n                    <div className=\"flex items-center justify-between mb-6\">\n                        <h4 className=\"text-sm font-bold text-neutral-300 flex items-center space-x-2\">\n                            <History className=\"w-4 h-4 text-emerald-500\" />\n                            <span>Execution Success Trends</span>\n                        </h4>\n                    </div>\n                    <div className=\"h-[250px] w-full\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <AreaChart data={trendData}>\n                                <defs>\n                                    <linearGradient id=\"colorSuccess\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                        <stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.3}/>\n                                        <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0}/>\n                                    </linearGradient>\n                                </defs>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#262626\" vertical={false} />\n                                <XAxis dataKey=\"name\" stroke=\"#525252\" fontSize={10} axisLine={false} tickLine={false} />\n                                <YAxis stroke=\"#525252\" fontSize={10} axisLine={false} tickLine={false} />\n                                <Tooltip \n                                    contentStyle={{ backgroundColor: '#171717', border: '1px solid #262626', borderRadius: '8px' }}\n                                    itemStyle={{ fontSize: '10px' }}\n                                />\n                                <Area type=\"monotone\" dataKey=\"success\" stroke=\"#10b981\" fillOpacity={1} fill=\"url(#colorSuccess)\" />\n                                <Area type=\"monotone\" dataKey=\"failed\" stroke=\"#ef4444\" fill=\"transparent\" />\n                            </AreaChart>\n                        </ResponsiveContainer>\n                    </div>\n                </div>\n\n                {/* Performance */}\n                <div className=\"bg-neutral-900 border border-neutral-800 p-6 rounded-2xl shadow-xl\">\n                    <div className=\"flex items-center justify-between mb-6\">\n                        <h4 className=\"text-sm font-bold text-neutral-300 flex items-center space-x-2\">\n                            <Clock className=\"w-4 h-4 text-blue-500\" />\n                            <span>Run Duration (Seconds)</span>\n                        </h4>\n                    </div>\n                    <div className=\"h-[250px] w-full\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <BarChart data={trendData}>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#262626\" vertical={false} />\n                                <XAxis dataKey=\"name\" stroke=\"#525252\" fontSize={10} axisLine={false} tickLine={false} tick={{fill: '#525252'}} />\n                                <YAxis stroke=\"#525252\" fontSize={10} axisLine={false} tickLine={false} tick={{fill: '#525252'}} />\n                                <Tooltip \n                                    cursor={{fill: '#262626'}}\n                                    contentStyle={{ backgroundColor: '#171717', border: '1px solid #262626', borderRadius: '8px' }}\n                                />\n                                <Bar dataKey=\"time\" fill=\"#3b82f6\" radius={[4, 4, 0, 0]} />\n                            </BarChart>\n                        </ResponsiveContainer>\n                    </div>\n                </div>\n            </div>\n\n            {/* Execution Timeline (Visual Analytics) */}\n            <div className=\"bg-neutral-900 border border-neutral-800 p-6 rounded-2xl shadow-xl\">\n                <div className=\"flex items-center justify-between mb-6\">\n                    <h4 className=\"text-sm font-bold text-neutral-300 flex items-center space-x-2\">\n                        <Calendar className=\"w-4 h-4 text-purple-500\" />\n                        <span>Execution Timeline (Heatmap)</span>\n                    </h4>\n                </div>\n                <div className=\"grid grid-cols-12 gap-1 px-4 h-8\">\n                    {timelineData.slice(-48).map((run, i) => (\n                        <div \n                            key={i} \n                            className={cn(\"h-full rounded-sm cursor-help transition-all\", run.status ? \"bg-emerald-500/50 hover:bg-emerald-400\" : \"bg-red-500/50 hover:bg-red-400\")}\n                            title={`${new Date(run.timestamp).toLocaleString()}\\nDuration: ${run.duration}s`}\n                        />\n                    ))}\n                </div>\n                <div className=\"flex justify-between mt-2 px-4 text-[9px] text-neutral-600 font-bold uppercase tracking-widest\">\n                    <span>Earlier</span>\n                    <span>Recent</span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst AiAssistantSidebar = ({ onSuggestion }: { onSuggestion: (steps: any[]) => void }) => {\n    const [query, setQuery] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const handleAsk = async () => {\n        if (!query) return;\n        setLoading(true);\n        try {\n            const res = await fetch('/api/ai', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ prompt: query })\n            });\n            const json = await res.json();\n            if (json.success && json.steps) {\n                // Ensure all steps have unique IDs for React keys\n                const stepsWithIds = json.steps.map((s: any) => ({\n                    ...s,\n                    id: s.id || Math.random().toString(36).substr(2, 9)\n                }));\n                onSuggestion(stepsWithIds);\n            }\n        } catch (e) {\n            console.error(\"AI Assistant Error\", e);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col h-full bg-neutral-900/50 border-l border-neutral-800 w-80 animate-in slide-in-from-right duration-500\">\n            <div className=\"p-4 border-b border-neutral-800 flex items-center justify-between\">\n                <div className=\"flex items-center space-x-2\">\n                    <Sparkles className=\"w-4 h-4 text-purple-400\" />\n                    <span className=\"text-sm font-bold text-neutral-200\">AI Assistant</span>\n                </div>\n            </div>\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                <div className=\"bg-neutral-950 border border-neutral-800 rounded-xl p-3 text-xs text-neutral-400 leading-relaxed italic\">\n                    &quot;I can help you convert natural language into test steps. Try: &apos;Login to portal and check for dashboard title&apos;.&quot;\n                </div>\n            </div>\n            <div className=\"p-4 border-t border-neutral-800 bg-neutral-900\">\n                <div className=\"relative\">\n                    <textarea \n                        value={query}\n                        onChange={(e) => setQuery(e.target.value)}\n                        placeholder=\"Ask for test logic...\"\n                        className=\"w-full bg-neutral-950 border border-neutral-800 rounded-lg p-3 text-xs text-neutral-200 outline-none focus:ring-1 focus:ring-purple-500 resize-none h-20\"\n                    />\n                    <button \n                        onClick={handleAsk}\n                        disabled={loading || !query}\n                        className=\"absolute bottom-2 right-2 p-1.5 bg-purple-600 hover:bg-purple-500 text-white rounded-md disabled:opacity-50\"\n                    >\n                        {loading ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Play className=\"w-3.5 h-3.5\" />}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst NoCodeStepBuilder = ({ steps, onStepsChange }: { steps: any[], onStepsChange: (steps: any[]) => void }) => {\n    const addStep = () => {\n        const newStep = { id: Date.now().toString(), action: 'click', value: '', selector: '' };\n        onStepsChange([...steps, newStep]);\n    };\n\n    const updateStep = (id: string, field: string, val: any) => {\n        onStepsChange(steps.map(s => s.id === id ? { ...s, [field]: val } : s));\n    };\n\n    const removeStep = (id: string) => {\n        onStepsChange(steps.filter(s => s.id !== id));\n    };\n\n    return (\n        <div className=\"space-y-3 p-4 bg-neutral-900 border border-neutral-800 rounded-2xl shadow-xl\">\n            <div className=\"flex items-center justify-between mb-2\">\n                <h4 className=\"text-xs font-bold text-neutral-500 uppercase tracking-widest\">No-Code Logic Builder</h4>\n                <button onClick={addStep} className=\"p-1 hover:bg-neutral-800 rounded text-emerald-500\"><Plus className=\"w-3.5 h-3.5\" /></button>\n            </div>\n            <div className=\"space-y-4 max-h-[300px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-neutral-800\">\n                {steps.map((step, idx) => (\n                    <div key={step.id || `step-${idx}`} className=\"group relative flex items-center space-x-3 bg-neutral-950/50 p-3 rounded-xl border border-neutral-800 hover:border-neutral-700 transition-all\">\n                        <span className=\"text-[10px] font-bold text-neutral-700 w-4\">{idx + 1}</span>\n                        <select \n                            value={step.action}\n                            onChange={(e) => updateStep(step.id, 'action', e.target.value)}\n                            className=\"bg-neutral-900 border border-neutral-800 rounded px-2 py-1 text-[10px] text-blue-400 outline-none\"\n                        >\n                            <option value=\"goto\">Navigate</option>\n                            <option value=\"click\">Click</option>\n                            <option value=\"type\">Type</option>\n                            <option value=\"assertion\">Verify</option>\n                            <option value=\"waitFor\">Wait For</option>\n                        </select>\n                        <input \n                            type=\"text\"\n                            placeholder=\"Value / Selector\"\n                            value={step.value || step.selector}\n                            onChange={(e) => updateStep(step.id, step.action === 'goto' || step.action === 'assertion' ? 'value' : 'selector', e.target.value)}\n                            className=\"flex-1 bg-transparent border-b border-neutral-800 focus:border-emerald-500 text-[11px] text-neutral-300 outline-none py-1\"\n                        />\n                        <button onClick={() => removeStep(step.id)} className=\"opacity-0 group-hover:opacity-100 p-1 text-neutral-600 hover:text-red-400 transition-all\"><Trash2 className=\"w-3 h-3\"/></button>\n                    </div>\n                ))}\n                {steps.length === 0 && <div className=\"text-center py-8 text-neutral-700 text-xs italic\">Drag or add steps to begin</div>}\n            </div>\n        </div>\n    );\n};\n\nconst TerminalWindow = ({ logs, onClear }: { logs: string[], onClear: () => void }) => {\n    const formatLog = (log: string) => {\n        if (log.toLowerCase().includes('failed') || log.toLowerCase().includes('error')) \n            return <span className=\"text-red-400 font-bold\">{log}</span>;\n        if (log.toLowerCase().includes('passed') || log.toLowerCase().includes('successfully') || log.toLowerCase().includes('completed')) \n            return <span className=\"text-emerald-400 font-bold\">{log}</span>;\n        if (log.toLowerCase().includes('executing') || log.toLowerCase().includes('starting')) \n            return <span className=\"text-blue-400\">{log}</span>;\n        if (log.toLowerCase().includes('resolving') || log.toLowerCase().includes('healed')) \n            return <span className=\"text-yellow-400 italic\">{log}</span>;\n        return <span className=\"text-neutral-400\">{log}</span>;\n    };\n\n    return (\n        <div className=\"mt-6 border border-neutral-800 rounded-xl overflow-hidden bg-black shadow-2xl relative\">\n            <div className=\"absolute inset-0 pointer-events-none opacity-[0.03] bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-10 bg-[length:100%_2px,3px_100%]\"></div>\n            <div className=\"bg-neutral-900/80 backdrop-blur-md px-4 py-2 border-b border-neutral-800 flex items-center justify-between\">\n                <div className=\"flex items-center space-x-2\">\n                    <Terminal className=\"w-4 h-4 text-emerald-500\" />\n                    <span className=\"text-[10px] uppercase font-bold text-neutral-400 tracking-widest\">Live Terminal Output</span>\n                </div>\n                <div className=\"flex items-center space-x-3\">\n                    <div className=\"flex items-center space-x-1.5\">\n                        <div className=\"w-2 h-2 rounded-full bg-red-500/80 shadow-[0_0_8px_rgba(239,68,68,0.5)]\"></div>\n                        <div className=\"w-2 h-2 rounded-full bg-yellow-500/80\"></div>\n                        <div className=\"w-2 h-2 rounded-full bg-emerald-500/80 shadow-[0_0_8px_rgba(16,185,129,0.5)]\"></div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"h-[250px] overflow-y-auto p-4 font-mono text-[11px] leading-relaxed scrollbar-thin scrollbar-thumb-neutral-800 scrollbar-track-transparent\">\n                {logs.length === 0 ? (\n                    <div className=\"h-full flex flex-col items-center justify-center text-neutral-700 space-y-2\">\n                        <Terminal className=\"w-8 h-8 opacity-20\" />\n                        <p className=\"animate-pulse\">Waiting for test execution...</p>\n                    </div>\n                ) : (\n                    <div className=\"space-y-1\">\n                        {logs.map((log, i) => (\n                            <div key={i} className=\"flex space-x-2 group\">\n                                <span className=\"text-neutral-600 select-none min-w-[20px]\">{i + 1}</span>\n                                <div className=\"break-all\">{formatLog(log)}</div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n            {logs.length > 0 && (\n                <button \n                    onClick={onClear}\n                    className=\"absolute bottom-4 right-4 bg-neutral-800 hover:bg-neutral-700 text-neutral-400 px-2 py-1 rounded text-[9px] uppercase tracking-tighter transition-all border border-neutral-700/50\"\n                >\n                    Clear Terminal\n                </button>\n            )}\n        </div>\n    );\n};\n\nexport default function Home() {\n  // Scraper State\n  const [url, setUrl] = useState('');\n  const [selector, setSelector] = useState('');\n  const [scrapeData, setScrapeData] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [headless, setHeadless] = useState(false);\n  \n  // Recorder State\n  const [recording, setRecording] = useState(false);\n  const [recordedCode, setRecordedCode] = useState('');\n  const [recorderLang, setRecorderLang] = useState<'javascript' | 'python'>('javascript');\n\n  // AI Copilot State\n  const [aiPrompt, setAiPrompt] = useState('');\n  const [aiLoading, setAiLoading] = useState(false);\n  const [aiSteps, setAiSteps] = useState<any[] | null>(null);\n  const [aiPythonCode, setAiPythonCode] = useState<string>('');\n  const [aiRawResponse, setAiRawResponse] = useState<string>('');\n  const [viewMode, setViewMode] = useState<'json' | 'python' | 'raw'>('json');\n\n  // Login State\n  const [showLogin, setShowLogin] = useState(false);\n  const [loginConfig, setLoginConfig] = useState({\n      enabled: false,\n      url: '',\n      username: '',\n      password: '',\n      usernameSelector: 'input[type=\"text\"], input[type=\"email\"]',\n      passwordSelector: 'input[type=\"password\"]',\n      submitSelector: 'button[type=\"submit\"]'\n  });\n\n  // File Manager State\n  const [files, setFiles] = useState<any[]>([]);\n  const [selectedFile, setSelectedFile] = useState<string | null>(null);\n  const [fileContent, setFileContent] = useState('');\n  const [testResult, setTestResult] = useState<any>(null);\n  const [isRunning, setIsRunning] = useState(false);\n\n  // Reporting State\n  const [activeTab, setActiveTab] = useState<'tests' | 'pom' | 'reports' | 'scheduling' | 'cicd' | 'bdd' | 'suites'>('tests');\n  const [stats, setStats] = useState<any>(null);\n  const [runHistory, setRunHistory] = useState<any[]>([]);\n\n  // POM State\n  const [pages, setPages] = useState<any[]>([]);\n  const [selectedPage, setSelectedPage] = useState<any>(null);\n  const [selectors, setSelectors] = useState<any[]>([]);\n  const [pageTests, setPageTests] = useState<any[]>([]);\n  const [dataFiles, setDataFiles] = useState<any[]>([]);\n  const [bddFeatures, setBddFeatures] = useState<string[]>([]);\n  const [bddTags, setBddTags] = useState<string>('');\n  const [bddResult, setBddResult] = useState<any>(null);\n  const [selectedDataFile, setSelectedDataFile] = useState<string>('');\n  const [dataPreview, setDataPreview] = useState<any[]>([]);\n  const [dataColumns, setDataColumns] = useState<string[]>([]);\n  \n  // Scheduling State\n  const [jobs, setJobs] = useState<any[]>([]);\n\n  // Suites State\n  const [suites, setSuites] = useState<{ [tag: string]: any[] }>({});\n  const [suiteResult, setSuiteResult] = useState<any>(null);\n  const [concurrency, setConcurrency] = useState(1);\n\n  // CI/CD State\n  const [ciConfig, setCiConfig] = useState({ provider: 'github', trigger: 'push', scheduleCron: '0 0 * * *' });\n  const [generatedYaml, setGeneratedYaml] = useState('');\n\n  // Visual Regression State\n  const [snapshots, setSnapshots] = useState<string[]>([]);\n  const [selectedSnapshot, setSelectedSnapshot] = useState<string>('');\n  const [visualImages, setVisualImages] = useState<{ baseline?: string, actual?: string, diff?: string }>({});\n\n  // Terminal State\n  const [terminalLogs, setTerminalLogs] = useState<string[]>([]);\n  const terminalEndRef = useRef<HTMLDivElement>(null);\n\n  const scrollToBottom = () => {\n    terminalEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [terminalLogs]);\n\n\n  // UI Panels\n  const [showAiSidebar, setShowAiSidebar] = useState(false);\n\n  useEffect(() => {\n    fetchFiles();\n    fetchPages();\n    fetchJobs();\n    fetchDataFiles();\n    fetchSuites();\n  }, []);\n\n  const fetchSuites = async () => {\n      const res = await fetch('/api/suites');\n      const json = await res.json();\n      if (json.success) setSuites(json.suites);\n  };\n\n  const fetchSnapshots = async () => {\n      const res = await fetch('/api/visual');\n      const json = await res.json();\n      if (json.success) setSnapshots(json.snapshots);\n  };\n\n  const loadSnapshotData = async (name: string) => {\n      setSelectedSnapshot(name);\n      if (!name) return;\n      const types = ['baseline', 'actual', 'diff'];\n      const images: any = {};\n      for (const type of types) {\n          const res = await fetch(`/api/visual?type=${type}&name=${name}`);\n          const json = await res.json();\n          if (json.success) images[type] = json.image;\n      }\n      setVisualImages(images);\n  };\n\n  const stopTest = async () => {\n      try {\n          const res = await fetch('/api/tests/stop', { method: 'POST' });\n          const json = await res.json();\n          if (json.success) {\n              setIsRunning(false);\n          }\n      } catch (e: any) {\n          console.error(\"Failed to stop test:\", e);\n      }\n  };\n\n  const fetchJobs = async () => {\n      const res = await fetch('/api/jobs');\n      const json = await res.json();\n      if (json.success) setJobs(json.jobs);\n  };\n\n  const createJob = async () => {\n      if (!selectedFile) {\n          alert(\"Please select a test file first to schedule it.\");\n          return;\n      }\n      const schedule = prompt(\"Enter Cron Schedule (e.g. '* * * * *' for every minute):\", \"* * * * *\");\n      if (!schedule) return;\n\n      const res = await fetch('/api/jobs', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ test_name: selectedFile, schedule })\n      });\n      const json = await res.json();\n      if (json.success) {\n          fetchJobs();\n          setActiveTab('scheduling');\n      } else {\n          alert(\"Error: \" + json.error);\n      }\n  };\n\n  const deleteJob = async (id: number) => {\n      if(!confirm(\"Stop and delete this job?\")) return;\n      await fetch(`/api/jobs?id=${id}`, { method: 'DELETE' });\n      fetchJobs();\n  };\n\n  const fetchFiles = async () => {\n    const res = await fetch('/api/files');\n    const json = await res.json();\n    if (json.success) setFiles(json.files);\n  };\n\n  const fetchPages = async () => {\n      const res = await fetch('/api/pom?type=pages');\n      const json = await res.json();\n      if (json.success) setPages(json.data);\n  };\n\n  const fetchDataFiles = async () => {\n      const res = await fetch('/api/files'); \n      const json = await res.json();\n      if (json.success && json.files) {\n          setDataFiles(json.files.filter((f: any) => f.name.endsWith('.csv') || f.name.endsWith('.json')));\n      }\n  };\n\n  const loadDataContent = async (path: string) => {\n      setSelectedDataFile(path);\n      if (!path) {\n          setDataPreview([]);\n          setDataColumns([]);\n          return;\n      }\n      const res = await fetch(`/api/data?path=${path}`);\n      const json = await res.json();\n      if (json.success && Array.isArray(json.data)) {\n          setDataPreview(json.data.slice(0, 5));\n          if (json.data.length > 0) {\n              setDataColumns(Object.keys(json.data[0]));\n          }\n      }\n  };\n\n  const fetchSelectors = async (pageId: number) => {\n      const res = await fetch(`/api/pom?type=selectors&pageId=${pageId}`);\n      const json = await res.json();\n      if (json.success) setSelectors(json.data);\n      \n      const resTests = await fetch(`/api/pom?type=tests&pageId=${pageId}`);\n      const jsonTests = await resTests.json();\n      if (jsonTests.success) setPageTests(jsonTests.data);\n  };\n\n  const fetchReports = async () => {\n    const res = await fetch('/api/reports');\n    const json = await res.json();\n    if (json.success) {\n        setStats(json.stats);\n        setRunHistory(json.runs);\n    }\n  };\n\n  const loadFile = async (path: string) => {\n    setSelectedFile(path);\n    const res = await fetch(`/api/files/read?path=${path}`);\n    const json = await res.json();\n    if (json.success) {\n      if (typeof json.content === 'string' || json.content.raw) {\n          setFileContent(json.content.raw || json.content);\n      } else {\n          setFileContent(JSON.stringify(json.content, null, 2));\n      }\n    }\n  };\n\n  const saveFile = async () => {\n    if (!selectedFile) return;\n    try {\n      let contentToSave = fileContent;\n      // Try parsing if it looks like JSON and we expect JSON (simple heuristic)\n      if (selectedFile.endsWith('.json')) {\n          try {\n             contentToSave = JSON.parse(fileContent);\n          } catch(e) { /* ignore, save as string/invalid json */ }\n      }\n\n      await fetch('/api/files', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ path: selectedFile, content: contentToSave }),\n      });\n      alert('File Saved!');\n      fetchFiles();\n    } catch (e) {\n      alert('Invalid JSON');\n    }\n  };\n\n  const runTest = async () => {\n    setIsRunning(true);\n    setTestResult(null);\n    setTerminalLogs([\"Initializing test execution...\"]);\n    try {\n      if (selectedFile?.endsWith('.json')) {\n          const steps = JSON.parse(fileContent);\n          const res = await fetch('/api/tests/run', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ steps }),\n          });\n          const json = await res.json();\n          setTestResult(json.result);\n          if (json.result?.logs) setTerminalLogs(prev => [...prev, ...json.result.logs]);\n      } else if (selectedFile && (selectedFile.endsWith('.js') || selectedFile.endsWith('.ts') || selectedFile.endsWith('.py'))) {\n          // Execute code file directly\n          const res = await fetch('/api/tests/exec', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ path: selectedFile })\n          });\n          const json = await res.json();\n          const freshLogs = json.logs || [json.error || 'Unknown execution error'];\n          setTestResult({\n              success: json.success && json.result,\n              logs: freshLogs,\n              duration: 0\n          });\n          setTerminalLogs(prev => [...prev, ...freshLogs]);\n      } else {\n          alert(\"Unsupported file type.\");\n      }\n    } catch (e: any) {\n      const errorLog = `Error: ${e.message}`;\n      setTestResult({ success: false, logs: [errorLog] });\n      setTerminalLogs(prev => [...prev, errorLog]);\n    } finally {\n      setIsRunning(false);\n    }\n  };\n\n  const createNewFile = async () => {\n    const name = prompt('File Name (e.g. login-check.json):');\n    if (!name) return;\n    \n    // Default template from recent scrape if available\n    let content = [\n      { id: '1', action: 'goto', value: url || 'https://example.com' },\n      { id: '2', action: 'assertion', value: 'Example Domain' }\n    ];\n\n    if (scrapeData && scrapeData.url) {\n        content = [\n            { id: '1', action: 'goto', value: scrapeData.url },\n            { id: '2', action: 'assertion', value: scrapeData.title || '' }\n        ];\n    } else if (aiSteps) {\n        content = aiSteps;\n    }\n\n    await fetch('/api/files', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ path: name, content }),\n    });\n    fetchFiles();\n    loadFile(name);\n  };\n\n  const createNewPage = async () => {\n      const name = prompt('Page Name (e.g. LoginPage):');\n      if (!name) return;\n      await fetch('/api/pom', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ type: 'page', name, url: url || '' }),\n      });\n      fetchPages();\n  };\n\n  const addSelector = async () => {\n      if (!selectedPage) return;\n      const name = prompt('Selector Name (e.g. username_input):');\n      const sel = prompt('Selector Value (e.g. #username):', selector || '');\n      if (!name || !sel) return;\n\n      await fetch('/api/pom', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ \n              type: 'selector', \n              pageId: selectedPage.id, \n              name, \n              selector: sel,\n              elementType: 'element'\n          }),\n      });\n      fetchSelectors(selectedPage.id);\n  };\n\n  const addPageTest = async () => {\n      if (!selectedPage) return;\n      const name = prompt('Test Name (e.g. Valid Login):');\n      if (!name) return;\n      \n      // Default template\n      const content = [\n          { id: '1', action: 'goto', value: selectedPage.url || 'https://example.com' }\n      ];\n\n      await fetch('/api/pom', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ \n              type: 'test', \n              pageId: selectedPage.id, \n              name, \n              steps: content,\n              description: ''\n          }),\n      });\n      fetchSelectors(selectedPage.id);\n  };\n\n  const runPageTest = async (test: any) => {\n      setIsRunning(true);\n      setTestResult(null);\n      setTerminalLogs([\"Starting runner for Page Object test...\"]);\n      try {\n          const steps = JSON.parse(test.steps);\n          const res = await fetch('/api/tests/run', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ steps }),\n          });\n          const json = await res.json();\n          setTestResult(json.result);\n          if (json.result?.logs) setTerminalLogs(prev => [...prev, ...json.result.logs]);\n      } catch (e: any) {\n          const errorLog = `Error: ${e.message}`;\n          setTestResult({ success: false, logs: [errorLog] });\n          setTerminalLogs(prev => [...prev, errorLog]);\n      } finally {\n          setIsRunning(false);\n      }\n  };\n\n  const runBdd = async () => {\n      setIsRunning(true);\n      setBddResult(null);\n      setTerminalLogs([\"Spinning up Cucumber-js environment...\", \"Looking for feature files in /features...\"]);\n      try {\n          const res = await fetch('/api/bdd/run', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ tags: bddTags })\n          });\n          const json = await res.json();\n          const freshLogs = (json.logs || json.error || \"\").split('\\n').filter((l: string) => l.trim() !== \"\");\n          setBddResult({\n              success: json.success,\n              output: json.output || json.error\n          });\n          setTerminalLogs(prev => [...prev, ...freshLogs]);\n      } catch (e: any) {\n          const errorLog = `BDD Error: ${e.message}`;\n          setBddResult({ success: false, output: e.message });\n          setTerminalLogs(prev => [...prev, errorLog]);\n      } finally {\n          setIsRunning(false);\n      }\n  };\n\n\n\n  const runSuite = async (tag: string) => {\n      setIsRunning(true);\n      setSuiteResult(null);\n      setTerminalLogs([`Initializing Suite Run for tag: @${tag}`, `Concurrency set to: ${concurrency}`]);\n      try {\n          const res = await fetch('/api/suites/run', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ tag, concurrency })\n          });\n          const json = await res.json();\n          setSuiteResult({\n              tag,\n              success: json.success,\n              summary: json.summary,\n              results: json.results\n          });\n          if (json.results) {\n              const suiteLogs = json.results.map((r: any) => `[${r.success ? 'PASS' : 'FAIL'}] ${r.name} (${r.duration}ms)`);\n              setTerminalLogs(prev => [...prev, ...suiteLogs, `--- Suite Execution Finished ---`]);\n          }\n      } catch (e: any) {\n          const errorLog = `Suite Error: ${e.message}`;\n          setTerminalLogs(prev => [...prev, errorLog]);\n          alert(\"Suite Execution Failed: \" + e.message);\n      } finally {\n          setIsRunning(false);\n      }\n  };\n\n  const handleScrape = async () => {\n    if (!url) return;\n    setLoading(true);\n    setError('');\n    setScrapeData(null);\n    try {\n      const res = await fetch('/api/scrape', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ \n            url, \n            selector,\n            login: loginConfig.enabled ? loginConfig : undefined,\n            headless\n        }),\n      });\n      const json = await res.json();\n      if (!res.ok) throw new Error(json.error || 'Failed to scrape');\n      setScrapeData(json.data);\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const startRecorder = async () => {\n      setRecording(true);\n      setRecordedCode('');\n      try {\n          await fetch('/api/record', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ action: 'start', url, language: recorderLang }),\n          });\n      } catch (e) {\n          alert('Failed to launch recorder');\n          setRecording(false);\n      }\n  };\n\n  const stopRecorder = async () => {\n      try {\n          const res = await fetch('/api/record', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ action: 'stop' }),\n          });\n          const json = await res.json();\n          if (json.success) {\n              setRecordedCode(json.code);\n              setRecordedCode(json.code);\n              // Auto-create a file with this code\n              const name = prompt(\"Recording Finished! \\n\\nEnter a name to save this recording as (e.g. login-browsing):\");\n              if(name) {\n                   // Save based on lang\n                   const ext = recorderLang === 'python' ? '.py' : '.spec.ts';\n                   const fileName = name.endsWith('.ts') || name.endsWith('.js') || name.endsWith('.py') ? name : name + ext;\n                  \n                  await fetch('/api/files', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ path: fileName, content: json.code }), // Send raw string\n                  });\n                  fetchFiles();\n                  alert('Saved to ' + fileName);\n              }\n          } else {\n              alert('Error: ' + json.error);\n          }\n      } catch (e) {\n          alert('Failed to stop/save recorder');\n      } finally {\n          setRecording(false);\n      }\n  };\n\n  const handleAiGenerate = async () => {\n      if (!aiPrompt) return;\n      setAiLoading(true);\n      setAiSteps(null);\n      try {\n          const res = await fetch('/api/ai', {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ prompt: aiPrompt })\n          });\n          const json = await res.json();\n          if (json.success) {\n              setAiSteps(json.steps);\n              setAiPythonCode(json.pythonCode);\n              setAiRawResponse(json.raw);\n          } else {\n              setAiRawResponse(json.raw || json.error);\n              alert(json.error);\n          }\n      } catch (e) {\n          alert(\"AI Generation Failed\");\n      } finally {\n          setAiLoading(false);\n      }\n  };\n\n  const runWithData = async () => {\n      if (!selectedDataFile) return;\n      setIsRunning(true);\n      setTestResult(null);\n      \n      try {\n          // 1. Fetch Data\n          const dataRes = await fetch(`/api/data?path=${selectedDataFile}`);\n          const dataJson = await dataRes.json();\n          \n          if (!dataJson.success || !Array.isArray(dataJson.data)) {\n              alert(\"Failed to load valid data rows.\");\n              setIsRunning(false);\n              return;\n          }\n          \n          const rows = dataJson.data;\n          let passedCount = 0;\n          let totalLogs: string[] = [];\n          setTerminalLogs([`Starting Data-Driven Execution using ${selectedDataFile}...`]);\n\n          // 2. Iterate\n          for (let i = 0; i < rows.length; i++) {\n              const row = rows[i];\n              const rowMsg = `--- Data Row ${i+1}/${rows.length} ---`;\n              totalLogs.push(rowMsg);\n              setTerminalLogs(prev => [...prev, rowMsg]);\n\n              // Parse steps\n              let steps = typeof fileContent === 'string' ? JSON.parse(fileContent) : fileContent;\n              \n              const res = await fetch('/api/tests/run', {\n                  method: 'POST',\n                  headers: {'Content-Type': 'application/json'},\n                  body: JSON.stringify({ steps, data: row })\n              });\n              const json = await res.json();\n              \n              if (json.success && json.result.success) {\n                  passedCount++;\n                  const passMsg = ` Passed Row ${i+1}`;\n                  totalLogs.push(passMsg);\n                  setTerminalLogs(prev => [...prev, ...json.result.logs, passMsg]);\n              } else {\n                  const failMsg = ` Failed Row ${i+1}: ${json.error || 'Unknown error'}`;\n                  totalLogs.push(failMsg);\n                  setTerminalLogs(prev => [...prev, failMsg]);\n              }\n          }\n\n          setTestResult({\n              success: passedCount === rows.length,\n              duration: 0,\n              logs: [`Ran ${rows.length} iterations. ${passedCount} Passed.`, ...totalLogs]\n          });\n          setTerminalLogs(prev => [...prev, `Data Run Complete. Total Passed: ${passedCount}/${rows.length}`]);\n\n      } catch (e: any) {\n          setTerminalLogs(prev => [...prev, `Critical Error: ${e.message}`]);\n          alert(\"Data Run Error: \" + e.message);\n      } finally {\n          setIsRunning(false);\n      }\n  };\n\n  const saveAiCode = async () => {\n      const name = prompt('File Name (e.g. test_script.py):', 'generated_test.py');\n      if (!name) return;\n\n      const content = viewMode === 'python' ? aiPythonCode : aiSteps;\n      \n      await fetch('/api/files', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ path: name, content }),\n      });\n      fetchFiles();\n      loadFile(name);\n      fetchFiles();\n      loadFile(name);\n  };\n\n  const generateCI = async () => {\n      try {\n          const res = await fetch('/api/cicd', {\n              method: 'POST',\n              headers: {'Content-Type': 'application/json'},\n              body: JSON.stringify(ciConfig)\n          });\n          const json = await res.json();\n          if (json.success) {\n              setGeneratedYaml(json.yaml);\n          } else {\n              alert(json.error);\n          }\n      } catch (e) {\n          alert(\"Failed to generate CI config\");\n      }\n  };\n\n  const saveCI = async () => {\n      const name = '.github/workflows/playwright.yml';\n      // We need to ensure the directory exists, but our simple file API might not handle deep paths well if not recursive.\n      // For now, let's just save it as a file we can download or view. \n      // Actually, let's save it to the tests folder as a reference for now, or assume the user will copy it.\n      // Better: Prompt for path.\n      \n      const path = prompt(\"Save CI Config to:\", \".github/workflows/playwright.yml\");\n      if (!path) return;\n\n      await fetch('/api/files', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ path, content: generatedYaml }),\n      });\n      alert('Saved!');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-neutral-950 text-neutral-100 font-sans flex flex-col h-screen overflow-hidden\">\n        <div className=\"flex flex-1 overflow-hidden\">\n            <div className=\"flex-1 flex flex-col p-4 space-y-4 overflow-y-auto\">\n        \n        {/* Header */}\n        <div className=\"flex items-center justify-between border-b border-neutral-800 pb-6\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"p-3 bg-blue-600 rounded-lg shadow-lg shadow-blue-900/20\">\n              <Terminal className=\"w-6 h-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent\">\n                Automation Command Center\n              </h1>\n              <p className=\"text-neutral-400 text-sm\">Unified interface for Playwright automation tasks</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-3\">\n              <a \n                href=\"/manage\"\n                className=\"flex items-center space-x-2 px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg text-sm text-neutral-300 border border-neutral-700 transition-all hover:border-purple-500 group\"\n              >\n                  <Layout className=\"w-4 h-4 text-purple-400 group-hover:scale-110 transition-transform\" />\n                  <span className=\"font-bold\">Management Center</span>\n              </a>\n              <button \n                onClick={() => setShowAiSidebar(!showAiSidebar)}\n                className={cn(\"p-2 rounded-lg border transition-all\", showAiSidebar ? \"bg-purple-600/20 border-purple-500 text-purple-400 shadow-lg shadow-purple-900/20\" : \"bg-neutral-800 border-neutral-700 text-neutral-500 hover:text-white\")}\n                title=\"Toggle AI Assistant\"\n              >\n                  <Sparkles className=\"w-5 h-5\" />\n              </button>\n              {!recording ? (\n                  <>\n                  <button \n                    onClick={startRecorder}\n                    className=\"flex items-center space-x-2 px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg text-sm text-neutral-300 border border-neutral-700 transition-all hover:border-blue-500\"\n                  >\n                      <Video className=\"w-4 h-4 text-red-500\" />\n                      <span>Launch Recorder</span>\n                  </button>\n                  \n                  <div className=\"flex bg-neutral-800 rounded p-1\">\n                      <button \n                          onClick={() => setRecorderLang('javascript')}\n                          className={cn(\"px-2 py-1 text-xs rounded\", recorderLang === 'javascript' ? \"bg-neutral-700 text-white\" : \"text-neutral-500\")}\n                      >JS</button>\n                      <button \n                          onClick={() => setRecorderLang('python')}\n                          className={cn(\"px-2 py-1 text-xs rounded\", recorderLang === 'python' ? \"bg-neutral-700 text-white\" : \"text-neutral-500\")}\n                      >PY</button>\n                  </div>\n                  </>\n              ) : (\n                  <button \n                    onClick={stopRecorder}\n                    className=\"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm transition-all animate-pulse\"\n                  >\n                      <StopCircle className=\"w-4 h-4\" />\n                      <span>Stop & Save Recording</span>\n                  </button>\n              )}\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6 flex-1\">\n            \n            {/* LEFT COLUMN: Tools (4 col) */}\n            <div className=\"lg:col-span-4 space-y-6\">\n                \n                {/* AI Copilot Card */}\n                <div className=\"bg-gradient-to-br from-indigo-900/50 to-purple-900/50 border border-indigo-800/50 rounded-xl p-6 shadow-xl relative overflow-hidden group\">\n                    <div className=\"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity\">\n                        <Sparkles className=\"w-12 h-12 text-purple-300\" />\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2 mb-4 relative z-10\">\n                        <Sparkles className=\"w-5 h-5 text-purple-400\" />\n                        <h2 className=\"font-semibold text-purple-100\">AI Automation Copilot</h2>\n                    </div>\n\n                    <div className=\"space-y-3 relative z-10\">\n                        <textarea \n                            value={aiPrompt}\n                            onChange={(e) => setAiPrompt(e.target.value)}\n                            placeholder=\"e.g. Go to google.com and verify the title is Google\"\n                            className=\"w-full bg-black/30 border border-indigo-700/50 rounded-lg p-3 text-sm text-purple-100 placeholder-purple-300/50 outline-none focus:ring-1 focus:ring-purple-400 resize-none h-24\"\n                        />\n                         <button\n                            onClick={handleAiGenerate}\n                            disabled={aiLoading || !aiPrompt}\n                            className=\"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg text-sm font-medium transition-all shadow-lg shadow-purple-900/20 active:scale-95 disabled:opacity-50\"\n                        >\n                            {aiLoading ? (\n                                <div className=\"flex items-center justify-center space-x-2\">\n                                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                                    <span>Generating logic...</span>\n                                </div>\n                            ) : 'Generate Test Script'}\n                        </button>\n                    </div>\n                </div>\n\n                {/* Scraper Tool (Expanded) */}\n                <div className=\"bg-neutral-900 border border-neutral-800 rounded-xl p-6 shadow-xl\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                        <div className=\"flex items-center space-x-2\">\n                            <Search className=\"w-5 h-5 text-emerald-500\" />\n                            <h2 className=\"font-semibold\">Web Scraper & Inspector</h2>\n                        </div>\n                        \n                        {/* Headless Toggle */}\n                        <button \n                            onClick={() => setHeadless(!headless)}\n                            className=\"flex items-center space-x-2 text-xs bg-neutral-950 px-2 py-1 rounded border border-neutral-800 hover:border-neutral-600\"\n                            title={headless ? \"Browser is hidden (Fast)\" : \"Browser is visible (Debug)\"}\n                        >\n                            {headless ? <EyeOff className=\"w-3 h-3 text-neutral-500\"/> : <Eye className=\"w-3 h-3 text-blue-400\"/>}\n                            <span>{headless ? 'Headless' : 'Visible'}</span>\n                        </button>\n                    </div>\n                    \n                    <div className=\"space-y-4\">\n                        <div>\n                            <label className=\"text-xs font-medium text-neutral-500 mb-1 block\">Target URL</label>\n                            <input\n                                type=\"text\"\n                                placeholder=\"https://example.com\"\n                                value={url}\n                                onChange={(e) => setUrl(e.target.value)}\n                                className=\"w-full bg-neutral-950 border border-neutral-800 rounded p-2 text-sm focus:ring-1 focus:ring-emerald-500 outline-none\"\n                            />\n                        </div>\n                         \n                        <div>\n                            <label className=\"text-xs font-medium text-neutral-500 mb-1 block\">CSS Selector (Optional)</label>\n                            <input\n                                type=\"text\"\n                                placeholder=\"e.g. .price\"\n                                value={selector}\n                                onChange={(e) => setSelector(e.target.value)}\n                                className=\"w-full bg-neutral-950 border border-neutral-800 rounded p-2 text-sm focus:ring-1 focus:ring-emerald-500 outline-none\"\n                            />\n                        </div>\n\n                        {/* Authentication Toggle */}\n                        <div className=\"border border-neutral-800 rounded bg-neutral-950/50\">\n                            <button \n                                onClick={() => setShowLogin(!showLogin)}\n                                className=\"w-full flex items-center justify-between p-2 text-xs text-neutral-400 hover:text-neutral-200\"\n                            >\n                                <div className=\"flex items-center space-x-2\">\n                                    <Lock className=\"w-3 h-3\" />\n                                    <span>Authentication Required?</span>\n                                </div>\n                                {showLogin ? <ChevronUp className=\"w-3 h-3\"/> : <ChevronDown className=\"w-3 h-3\"/>}\n                            </button>\n                            \n                            {showLogin && (\n                                <div className=\"p-2 space-y-2 border-t border-neutral-800\">\n                                    <label className=\"flex items-center space-x-2 text-xs text-neutral-400 cursor-pointer select-none\">\n                                        <input \n                                            type=\"checkbox\" \n                                            checked={loginConfig.enabled}\n                                            onChange={(e) => setLoginConfig({...loginConfig, enabled: e.target.checked})}\n                                            className=\"rounded border-neutral-700 bg-neutral-900 text-emerald-500 focus:ring-0\"\n                                        />\n                                        <span>Enable Login Flow</span>\n                                    </label>\n                                    \n                                    {loginConfig.enabled && (\n                                        <div className=\"space-y-2 pt-2 animate-in slide-in-from-top-2\">\n                                            <input\n                                                type=\"text\"\n                                                placeholder=\"Username / Email\"\n                                                value={loginConfig.username}\n                                                onChange={(e) => setLoginConfig({...loginConfig, username: e.target.value})}\n                                                className=\"w-full bg-neutral-900 border border-neutral-800 rounded p-2 text-xs outline-none focus:border-emerald-500\"\n                                            />\n                                            <input\n                                                type=\"password\"\n                                                placeholder=\"Password\"\n                                                value={loginConfig.password}\n                                                onChange={(e) => setLoginConfig({...loginConfig, password: e.target.value})}\n                                                className=\"w-full bg-neutral-900 border border-neutral-800 rounded p-2 text-xs outline-none focus:border-emerald-500\"\n                                            />\n                                        </div>\n                                    )}\n                                </div>\n                            )}\n                        </div>\n\n                        <button\n                            onClick={handleScrape}\n                            disabled={loading || !url}\n                            className=\"w-full bg-emerald-600 hover:bg-emerald-500 text-white py-2.5 rounded-lg text-sm font-medium transition-all shadow-lg shadow-emerald-900/20 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed\"\n                        >\n                            {loading ? (\n                                <div className=\"flex items-center justify-center space-x-2\">\n                                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                                    <span>Processing...</span>\n                                </div>\n                            ) : 'Scrape URL'}\n                        </button>\n                    </div>\n                </div>\n\n                {/* Explorer Tabs */}\n                <div className=\"bg-neutral-900 border border-neutral-800 rounded-xl shadow-xl flex-1 flex flex-col overflow-hidden h-[400px]\">\n                    <div className=\"flex border-b border-neutral-800\">\n                        <button \n                            className={cn(\"flex-1 py-3 text-sm font-medium\", activeTab === 'tests' ? \"bg-neutral-800 text-white\" : \"text-neutral-500 hover:text-neutral-300\")}\n                            onClick={() => setActiveTab('tests')}\n                        >\n                            Test Scripts\n                        </button>\n                        <button \n                            className={cn(\"flex-1 py-3 text-sm font-medium\", activeTab === 'pom' ? \"bg-neutral-800 text-white\" : \"text-neutral-500 hover:text-neutral-300\")}\n                            onClick={() => setActiveTab('pom')}\n                        >\n                            Page Objects\n                        </button>\n                        <button \n                            className={cn(\"flex-1 py-3 text-[10px] font-bold uppercase tracking-wider transition-all\", activeTab === 'reports' ? \"bg-neutral-800 text-emerald-400 shadow-inner\" : \"text-neutral-500 hover:text-neutral-300\")}\n                            onClick={() => { setActiveTab('reports'); fetchReports(); }}\n                        >\n                            Analytics\n                        </button>\n                        <button \n                            className={cn(\"flex-1 py-3 text-[10px] font-bold uppercase tracking-wider transition-all\", activeTab === 'scheduling' ? \"bg-neutral-800 text-blue-400 shadow-inner\" : \"text-neutral-500 hover:text-neutral-300\")}\n                            onClick={() => { setActiveTab('scheduling'); fetchJobs(); }}\n                        >\n                            History\n                        </button>\n                        <button \n                            className={cn(\"flex-1 py-3 text-[10px] font-bold uppercase tracking-wider transition-all\", activeTab === 'cicd' ? \"bg-neutral-800 text-purple-400 shadow-inner\" : \"text-neutral-500 hover:text-neutral-300\")}\n                            onClick={() => setActiveTab('cicd')}\n                        >\n                            CI/CD\n                        </button>\n                        <button \n                            className={cn(\"flex-1 py-3 text-[10px] font-bold uppercase tracking-wider transition-all\", activeTab === 'bdd' ? \"bg-neutral-800 text-purple-400 shadow-inner\" : \"text-neutral-500 hover:text-neutral-300\")}\n                            onClick={() => setActiveTab('bdd')}\n                        >\n                            BDD\n                        </button>\n                        <button \n                            className={cn(\"flex-1 py-3 text-[10px] font-bold uppercase tracking-wider transition-all\", activeTab === 'suites' ? \"bg-neutral-800 text-yellow-400 shadow-inner\" : \"text-neutral-500 hover:text-neutral-300\")}\n                            onClick={() => { setActiveTab('suites'); fetchSuites(); }}\n                        >\n                            Suites\n                        </button>\n                    </div>\n\n                    <div className=\"p-4 flex-1 overflow-y-auto\">\n                        {activeTab === 'tests' ? (\n                            <div className=\"space-y-1\">\n                                <div className=\"flex justify-between items-center mb-2 px-2\">\n                                    <span className=\"text-xs text-neutral-500 font-bold uppercase\">Files</span>\n                                    <div className=\"flex space-x-1\">\n                                         <button onClick={createJob} className=\"p-1 hover:bg-neutral-800 rounded text-neutral-400\" title=\"Schedule Selected File\"><Clock className=\"w-3 h-3\"/></button>\n                                         <button onClick={createNewFile} className=\"p-1 hover:bg-neutral-800 rounded\"><Plus className=\"w-3 h-3\"/></button>\n                                    </div>\n                                </div>\n                                {files.map(file => (\n                                    <button\n                                        key={file.path}\n                                        onClick={() => loadFile(file.path)}\n                                        className={cn(\n                                            \"w-full text-left px-3 py-2 rounded text-sm flex items-center space-x-2 transition-colors\",\n                                            selectedFile === file.path ? \"bg-blue-900/30 text-blue-200 border border-blue-900\" : \"hover:bg-neutral-800 text-neutral-400 border border-transparent\"\n                                        )}\n                                    >\n                                        <FileCode className=\"w-4 h-4\" />\n                                        <span className=\"truncate\">{file.name}</span>\n                                    </button>\n                                ))}\n                            </div>\n                        ) : activeTab === 'pom' ? (\n                            <div className=\"space-y-4\">\n                                <div>\n                                    <div className=\"flex justify-between items-center mb-2 px-2\">\n                                        <span className=\"text-xs text-neutral-500 font-bold uppercase\">Pages</span>\n                                        <button onClick={createNewPage} className=\"p-1 hover:bg-neutral-800 rounded\"><Plus className=\"w-3 h-3\"/></button>\n                                    </div>\n                                    <div className=\"space-y-1\">\n                                        {pages.map(page => (\n                                            <button\n                                                key={page.id}\n                                                onClick={() => { setSelectedPage(page); fetchSelectors(page.id); }}\n                                                className={cn(\n                                                    \"w-full text-left px-3 py-2 rounded text-sm flex items-center space-x-2 transition-colors\",\n                                                    selectedPage?.id === page.id ? \"bg-emerald-900/30 text-emerald-200 border border-emerald-900\" : \"hover:bg-neutral-800 text-neutral-400 border border-transparent\"\n                                                )}\n                                            >\n                                                <LayoutTemplate className=\"w-4 h-4\" />\n                                                <span className=\"truncate\">{page.name}</span>\n                                            </button>\n                                        ))}\n                                    </div>\n                                </div>\n\n                                {selectedPage && (\n                                    <div className=\"pt-4 border-t border-neutral-800 animate-in slide-in-from-right-4\">\n                                        <div className=\"flex justify-between items-center mb-2 px-2\">\n                                            <span className=\"text-xs text-neutral-500 font-bold uppercase\">{selectedPage.name} Selectors</span>\n                                            <button onClick={addSelector} className=\"p-1 hover:bg-neutral-800 rounded\"><Plus className=\"w-3 h-3\"/></button>\n                                        </div>\n                                        <div className=\"space-y-1\">\n                                            {selectors.map(sel => (\n                                                <div key={sel.id} className=\"px-3 py-2 bg-neutral-900 border border-neutral-800 rounded text-xs text-neutral-300 flex justify-between items-center group hover:border-neutral-600\">\n                                                    <span className=\"font-mono\">{sel.name}</span>\n                                                    <span className=\"text-neutral-500\">{sel.selector}</span>\n                                                </div>\n                                            ))}\n                                            {selectors.length === 0 && <p className=\"text-xs text-neutral-600 italic px-2\">No selectors yet.</p>}\n                                        </div>\n                                        \n                                        <div className=\"pt-4 border-t border-neutral-800 mt-4\">\n                                            <div className=\"flex justify-between items-center mb-2 px-2\">\n                                                <span className=\"text-xs text-neutral-500 font-bold uppercase\">{selectedPage.name} Test Cases</span>\n                                                <button onClick={addPageTest} className=\"p-1 hover:bg-neutral-800 rounded\"><Plus className=\"w-3 h-3\"/></button>\n                                            </div>\n                                            <div className=\"space-y-1\">\n                                                {pageTests.map(test => (\n                                                    <div key={test.id} className=\"px-3 py-2 bg-neutral-900 border border-neutral-800 rounded text-xs text-neutral-300 flex justify-between items-center group hover:border-neutral-600\">\n                                                        <span className=\"font-mono\">{test.name}</span>\n                                                        <button onClick={() => runPageTest(test)} className=\"text-emerald-500 hover:text-emerald-400\"><Play className=\"w-3 h-3\"/></button>\n                                                    </div>\n                                                ))}\n                                                {pageTests.length === 0 && <p className=\"text-xs text-neutral-600 italic px-2\">No tests yet.</p>}\n                                            </div>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        ) : activeTab === 'reports' ? (\n                            <div className=\"space-y-6\">\n                                <AnalyticsDashboard stats={stats} history={runHistory} />\n                                \n                                <div className=\"bg-neutral-900 border border-neutral-800 p-6 rounded-2xl shadow-xl\">\n                                    <div className=\"flex items-center justify-between mb-6\">\n                                        <div className=\"flex items-center space-x-2\">\n                                            <Eye className=\"w-5 h-5 text-blue-500\" />\n                                            <h4 className=\"text-sm font-bold text-neutral-300\">Visual Regression Comparison</h4>\n                                        </div>\n                                        <div className=\"flex items-center space-x-2\">\n                                            <select \n                                                className=\"bg-neutral-800 text-[10px] text-neutral-400 rounded border border-neutral-700 px-2 py-1 outline-none\"\n                                                value={selectedSnapshot}\n                                                onChange={(e) => { loadSnapshotData(e.target.value); fetchSnapshots(); }}\n                                                onClick={() => { if (snapshots.length === 0) fetchSnapshots(); }}\n                                            >\n                                                <option value=\"\">Select Snapshot</option>\n                                                {snapshots.map(s => <option key={s} value={s}>{s}</option>)}\n                                            </select>\n                                            <button onClick={fetchSnapshots} className=\"p-1 hover:bg-neutral-800 rounded text-neutral-500\"><RefreshCw className=\"w-3 h-3\"/></button>\n                                        </div>\n                                    </div>\n                                    <VisualComparisonSlider \n                                        baseline={visualImages.baseline} \n                                        actual={visualImages.actual} \n                                        diff={visualImages.diff} \n                                    />\n                                </div>\n                            </div>\n                        ) : activeTab === 'scheduling' ? (\n                            <div className=\"space-y-4\">\n                                <div className=\"flex justify-between items-center mb-2 px-2\">\n                                    <span className=\"text-xs text-neutral-500 font-bold uppercase\">Scheduled Jobs</span>\n                                    <button onClick={createJob} className=\"p-1 hover:bg-neutral-800 rounded text-neutral-400\" title=\"Schedule New Job\">\n                                        <Plus className=\"w-3 h-3\"/>\n                                    </button>\n                                </div>\n                                <div className=\"space-y-2\">\n                                    {jobs.map(job => (\n                                        <div key={job.id} className=\"p-3 bg-neutral-800/50 border border-neutral-800 rounded-lg flex items-center justify-between\">\n                                            <div className=\"flex flex-col\">\n                                                <span className=\"text-sm text-neutral-200 font-medium\">{job.test_name}</span>\n                                                <span className=\"text-[10px] text-neutral-500 font-mono\">{job.cron_schedule}</span>\n                                            </div>\n                                            <div className=\"flex items-center space-x-2\">\n                                                <div className={cn(\"w-1.5 h-1.5 rounded-full\", job.active ? \"bg-emerald-500\" : \"bg-neutral-600\")} />\n                                                <button onClick={() => deleteJob(job.id)} className=\"text-neutral-500 hover:text-red-400 p-1\">\n                                                    <Trash2 className=\"w-3.5 h-3.5\" />\n                                                </button>\n                                            </div>\n                                        </div>\n                                    ))}\n                                    {jobs.length === 0 && <p className=\"text-xs text-neutral-600 italic px-2\">No scheduled jobs.</p>}\n                                </div>\n                            </div>\n                        ) : activeTab === 'cicd' ? (\n                            <div className=\"space-y-4\">\n                                <div className=\"p-4 bg-neutral-950 border border-neutral-800 rounded-xl space-y-4\">\n                                    <h4 className=\"text-xs font-bold text-neutral-500 uppercase\">Generate CI Workflow</h4>\n                                    <div className=\"space-y-2\">\n                                        <label className=\"text-[10px] text-neutral-500\">Provider</label>\n                                        <select \n                                            className=\"w-full bg-neutral-900 border border-neutral-800 rounded p-2 text-xs outline-none\"\n                                            value={ciConfig.provider}\n                                            onChange={(e) => setCiConfig({...ciConfig, provider: e.target.value})}\n                                        >\n                                            <option value=\"github\">GitHub Actions</option>\n                                            <option value=\"gitlab\">GitLab CI</option>\n                                        </select>\n                                    </div>\n                                    <button \n                                        onClick={generateCI}\n                                        className=\"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white rounded text-xs font-bold transition-all shadow-lg shadow-purple-900/20\"\n                                    >\n                                        Generate Workflow\n                                    </button>\n                                </div>\n                            </div>\n                        ) : null}\n\n                        {activeTab === 'bdd' && (\n                            <div className=\"space-y-6\">\n                                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                                    <h3 className=\"text-lg font-medium text-white flex items-center space-x-2\">\n                                        <Sparkles className=\"w-5 h-5 text-purple-400\" />\n                                        <span>Behavior Driven Testing (BDD)</span>\n                                    </h3>\n                                    \n                                    <div className=\"flex items-center space-x-3\">\n                                        <div className=\"flex items-center space-x-2 bg-neutral-950 border border-neutral-800 rounded-lg px-3 py-1.5 focus-within:border-purple-500/50 transition-all\">\n                                            <Search className=\"w-3.5 h-3.5 text-neutral-500\" />\n                                            <input \n                                                type=\"text\"\n                                                placeholder=\"Filter by tags (e.g. @smoke)\"\n                                                value={bddTags}\n                                                onChange={(e) => setBddTags(e.target.value)}\n                                                className=\"bg-transparent text-xs text-neutral-300 outline-none w-40 placeholder:text-neutral-700 font-mono\"\n                                            />\n                                        </div>\n                                        <button \n                                            onClick={runBdd}\n                                            disabled={isRunning}\n                                            className=\"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-xl text-sm font-bold shadow-xl shadow-purple-900/20 transition-all hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50\"\n                                        >\n                                            {isRunning ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Play className=\"w-4 h-4\" />}\n                                            <span>{bddTags ? `Run ${bddTags}` : 'Execute All Features'}</span>\n                                        </button>\n                                    </div>\n                                </div>\n\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                    {bddFeatures.map(f => (\n                                        <div key={f} className=\"p-4 bg-neutral-900 border border-neutral-800 rounded-2xl flex items-center justify-between hover:border-purple-500/30 transition-all cursor-pointer group\">\n                                            <div className=\"flex items-center space-x-3\">\n                                                <div className=\"p-2 bg-purple-500/10 rounded-lg group-hover:bg-purple-500/20 transition-colors\">\n                                                    <FileText className=\"w-4 h-4 text-purple-400\" />\n                                                </div>\n                                                <span className=\"text-sm text-neutral-300\">{f}</span>\n                                            </div>\n                                            <ChevronRight className=\"w-4 h-4 text-neutral-600 group-hover:text-purple-400 transition-all group-hover:translate-x-1\" />\n                                        </div>\n                                    ))}\n                                </div>\n\n                                {bddResult && (\n                                    <div className=\"mt-6 animate-in zoom-in-95 duration-300\">\n                                        <div className=\"flex items-center space-x-2 mb-3\">\n                                            <div className={cn(\"w-2 h-2 rounded-full\", bddResult.success ? \"bg-emerald-500\" : \"bg-red-500\")} />\n                                            <h4 className=\"text-xs font-bold text-neutral-400 uppercase tracking-widest\">Last Run Result</h4>\n                                        </div>\n                                        <pre className=\"p-6 bg-black border border-neutral-800 rounded-2xl text-[11px] font-mono text-emerald-400 overflow-auto whitespace-pre h-[400px] shadow-2xl\">\n                                            {bddResult.output}\n                                        </pre>\n                                    </div>\n                                )}\n                            </div>\n                        )}\n\n                        {activeTab === 'suites' && (\n                            <div className=\"space-y-4 p-4\">\n                                <div className=\"flex justify-between items-center\">\n                                    <h3 className=\"font-bold text-neutral-400 text-xs uppercase\">Test Suites (Tags)</h3>\n                                    <div className=\"flex space-x-2\">\n                                        <div className=\"flex items-center space-x-1 bg-neutral-800 px-2 py-1 rounded border border-neutral-700\">\n                                            <span className=\"text-[10px] text-neutral-500\">Concurrency:</span>\n                                            <input \n                                                type=\"number\" \n                                                value={concurrency} \n                                                onChange={(e) => setConcurrency(parseInt(e.target.value))}\n                                                min={1} \n                                                max={5} \n                                                className=\"w-8 bg-transparent text-[10px] text-emerald-400 focus:outline-none\" \n                                            />\n                                        </div>\n                                        {isRunning && (\n                                            <button \n                                                onClick={stopTest}\n                                                className=\"flex items-center space-x-1 px-2 py-1 bg-red-600/20 text-red-400 hover:bg-red-600/30 rounded text-xs transition-colors border border-red-600/50\"\n                                            >\n                                                <Square className=\"w-3 h-3 fill-current\" />\n                                            </button>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {suiteResult && (\n                                    <div className=\"bg-neutral-900 border border-neutral-800 rounded-lg p-3 space-y-2 animate-in fade-in zoom-in-95\">\n                                        <div className=\"flex items-center justify-between border-b border-neutral-800 pb-2 mb-2\">\n                                            <div className=\"flex items-center space-x-2\">\n                                                <h4 className=\"text-xs font-bold text-white uppercase tracking-wider\">Results: {suiteResult.tag}</h4>\n                                                <span className={cn(\"text-[10px] px-1.5 py-0.5 rounded\", suiteResult.summary.failed === 0 ? \"bg-emerald-500/10 text-emerald-500\" : \"bg-red-500/10 text-red-500\")}>\n                                                    {suiteResult.summary.passed}/{suiteResult.summary.total} Passed\n                                                </span>\n                                            </div>\n                                            <button onClick={() => setSuiteResult(null)} className=\"text-neutral-500 hover:text-neutral-300 text-[10px]\">Clear</button>\n                                        </div>\n                                        <div className=\"max-h-32 overflow-y-auto space-y-1 pr-1\">\n                                            {suiteResult.results.map((r: any, idx: number) => (\n                                                <div key={idx} className=\"flex items-center justify-between text-[10px] bg-neutral-950/50 p-1.5 rounded border border-neutral-800/50\">\n                                                    <div className=\"flex items-center space-x-2 truncate\">\n                                                        <div className={cn(\"w-1.5 h-1.5 rounded-full\", r.success ? \"bg-emerald-500\" : \"bg-red-500\")} />\n                                                        <span className=\"text-neutral-300 truncate\">{r.name}</span>\n                                                    </div>\n                                                    {r.duration && <span className=\"text-neutral-600 ml-2 whitespace-nowrap\">{r.duration}ms</span>}\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </div>\n                                )}\n\n                                <div className=\"space-y-2\">\n                                    {Object.entries(suites).map(([tag, tests]) => (\n                                        <div key={tag} className=\"p-3 bg-neutral-800/30 border border-neutral-800 rounded-lg group hover:border-emerald-500/50 transition-all\">\n                                            <div className=\"flex justify-between items-center\">\n                                                <div className=\"flex items-center space-x-2\">\n                                                    <div className={cn(\"w-2 h-2 rounded-full shadow-lg\", \n                                                        tag === 'smoke' ? \"bg-emerald-500 shadow-emerald-500/30\" : \n                                                        tag === 'regression' ? \"bg-purple-500 shadow-purple-500/30\" : \n                                                        \"bg-neutral-500\"\n                                                    )} />\n                                                    <span className=\"text-sm font-medium text-neutral-200 capitalize\">{tag}</span>\n                                                </div>\n                                                <button \n                                                    onClick={() => runSuite(tag)}\n                                                    disabled={isRunning}\n                                                    className=\"text-emerald-500 hover:text-emerald-400 p-1 hover:bg-emerald-500/10 rounded transition-colors disabled:opacity-50\"\n                                                    title={`Run ${tag} suite`}\n                                                >\n                                                    {isRunning ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Play className=\"w-4 h-4\" />}\n                                                </button>\n                                            </div>\n                                            <p className=\"text-[10px] text-neutral-500 mt-1\">{tests.length} tests tagged with @{tag}</p>\n                                            <div className=\"mt-2 space-y-1 hidden group-hover:block\">\n                                                {tests.map(t => (\n                                                    <div key={t.path} className=\"text-[9px] text-neutral-400 flex items-center space-x-1\">\n                                                        <FileCode className=\"w-2.5 h-2.5 opacity-50\" />\n                                                        <span>{t.name}</span>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        </div>\n                                    ))}\n                                    {Object.keys(suites).length === 0 && (\n                                        <p className=\"text-xs text-neutral-600 italic px-2\">No tags detected in test files.</p>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            {/* RIGHT COLUMN: Results & Editor (8 col) */}\n            <div className=\"lg:col-span-8 space-y-6\">\n\n                 {/* Scraper Output (if active) */}\n                 {(scrapeData || error || loading || recordedCode || aiSteps) && (\n                    <div className=\"bg-neutral-900 border border-neutral-800 rounded-xl p-6 shadow-xl animate-in fade-in slide-in-from-top-4\">\n                        <div className=\"flex justify-between items-start mb-4\">\n                            <div>\n                                <h3 className=\"text-lg font-medium text-white\">Results</h3>\n                                {recordedCode && <p className=\"text-xs text-neutral-500\">Recorded Playwright Code</p>}\n                                {aiSteps && <p className=\"text-xs text-purple-400\">AI Generated Steps</p>}\n                                {scrapeData && <p className=\"text-xs text-neutral-500\">Data extracted from target URL</p>}\n                            </div>\n                            {(scrapeData || aiSteps) && (\n                                <div className=\"flex space-x-2\">\n                                    <button \n                                        onClick={saveAiCode}\n                                        className=\"flex items-center space-x-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-500 text-white rounded text-xs font-medium\"\n                                    >\n                                        <Save className=\"w-3 h-3\" />\n                                        <span>Save {viewMode === 'python' ? '.py' : '.json'}</span>\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                        \n                        {loading ? (\n                             <div className=\"h-40 flex flex-col items-center justify-center text-neutral-500 space-y-2\">\n                                 <Loader2 className=\"w-8 h-8 animate-spin text-emerald-500\" />\n                                 <p className=\"text-sm\">Browser is running actions...</p>\n                                 {!headless && <p className=\"text-xs text-neutral-600\">(Check the open browser window)</p>}\n                             </div>\n                        ) : (\n                            <div className=\"relative\">\n                                {(aiSteps || aiPythonCode || aiRawResponse) && (\n                <div className=\"absolute top-2 right-2 flex space-x-2\">\n                    <div className=\"bg-neutral-800 rounded p-1 flex text-xs\">\n                        <button \n                            onClick={() => setViewMode('json')}\n                            className={cn(\"px-2 py-1 rounded\", viewMode === 'json' ? \"bg-neutral-700 text-white\" : \"text-neutral-400 hover:text-neutral-300\")}\n                        >\n                            JSON\n                        </button>\n                        <button \n                            onClick={() => setViewMode('python')}\n                            className={cn(\"px-2 py-1 rounded\", viewMode === 'python' ? \"bg-neutral-700 text-white\" : \"text-neutral-400 hover:text-neutral-300\")}\n                        >\n                            Python\n                        </button>\n                        <button \n                            onClick={() => setViewMode('raw')}\n                            className={cn(\"px-2 py-1 rounded\", viewMode === 'raw' ? \"bg-neutral-700 text-white\" : \"text-neutral-400 hover:text-neutral-300\")}\n                        >\n                            Raw\n                        </button>\n                    </div>\n                </div>\n            )}\n\n            <pre className=\"text-xs font-mono text-emerald-300 bg-black p-4 rounded-lg overflow-auto max-h-60 border border-neutral-800\">\n                {error ? <span className=\"text-red-400\">{error}</span> : \n                 recordedCode ? recordedCode :\n                 (aiSteps || aiPythonCode || aiRawResponse) ? (\n                     viewMode === 'raw' ? aiRawResponse :\n                     viewMode === 'python' ? aiPythonCode : \n                     JSON.stringify(aiSteps, null, 2)\n                 ) : \n                 scrapeData ? JSON.stringify(scrapeData, null, 2) : \n                 'Ready...'}\n            </pre>\n                            </div>\n                        )}\n                    </div>\n                )}\n                \n                {/* Editor & Terminal Section */}\n                {selectedFile ? (\n                    <div className=\"flex flex-col space-y-4\">\n                        {selectedFile.endsWith('.json') && (\n                            <NoCodeStepBuilder \n                                steps={(() => {\n                                    try { return JSON.parse(fileContent); } catch(e) { return []; }\n                                })()} \n                                onStepsChange={(newSteps) => setFileContent(JSON.stringify(newSteps, null, 2))} \n                            />\n                        )}\n\n                        <div className=\"bg-neutral-900 border border-neutral-800 rounded-xl overflow-hidden shadow-xl flex flex-col\">\n                            {/* Editor Header */}\n                            <div className=\"px-4 py-3 border-b border-neutral-800 flex justify-between items-center bg-neutral-900/50\">\n                                <div className=\"flex items-center space-x-2\">\n                                    <FileCode className=\"w-4 h-4 text-emerald-400\" />\n                                    <span className=\"font-mono text-xs text-neutral-300 truncate max-w-[200px]\">{selectedFile}</span>\n                                </div>\n                                <div className=\"flex items-center space-x-2\">\n                                    <select \n                                        className=\"bg-neutral-800 text-[10px] text-neutral-400 rounded border border-neutral-700 px-2 py-1 outline-none focus:border-blue-500/50 transition-colors\"\n                                        value={selectedDataFile}\n                                        onChange={(e) => loadDataContent(e.target.value)}\n                                    >\n                                        <option value=\"\">No Data</option>\n                                        {dataFiles.map(f => <option key={f.path} value={f.path}>{f.name}</option>)}\n                                    </select>\n                                    \n                                    <div className=\"h-4 w-[1px] bg-neutral-800 mx-1\"></div>\n\n                                    <button \n                                        onClick={saveFile}\n                                        className=\"p-1.5 text-neutral-400 hover:text-white hover:bg-neutral-800 rounded transition-all\"\n                                        title=\"Save Script\"\n                                    >\n                                        <Save className=\"w-4 h-4\" />\n                                    </button>\n\n                                    <button \n                                        onClick={selectedDataFile ? runWithData : runTest}\n                                        disabled={isRunning}\n                                        className={cn(\"flex items-center space-x-1.5 px-4 py-1.5 rounded text-xs font-bold transition-all shadow-lg\", \n                                            selectedDataFile ? \"bg-blue-600 hover:bg-blue-500 text-white shadow-blue-900/20\" : \"bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-900/20\"\n                                        )}\n                                    >\n                                        {isRunning ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\"/> : <Rocket className=\"w-3.5 h-3.5\" />}\n                                        <span>{selectedDataFile ? 'Run Data Suite' : 'Run Script'}</span>\n                                    </button>\n\n                                    {isRunning && (\n                                        <button \n                                            onClick={stopTest}\n                                            className=\"flex items-center space-x-1.5 px-3 py-1.5 bg-red-600 hover:bg-red-500 text-white rounded text-xs font-bold shadow-lg shadow-red-900/20\"\n                                        >\n                                            <Square className=\"w-3 h-3 fill-current\" />\n                                            <span>Stop</span>\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* Data Preview (Inline) */}\n                            {selectedDataFile && dataColumns.length > 0 && (\n                                <div className=\"px-4 py-2 bg-blue-900/5 border-b border-neutral-800 animate-in slide-in-from-top-1\">\n                                    <div className=\"flex items-center justify-between mb-2\">\n                                        <div className=\"flex items-center space-x-2\">\n                                            <Database className=\"w-3 h-3 text-blue-400\" />\n                                            <span className=\"text-[10px] font-bold text-neutral-500 uppercase tracking-tight\">Active Data Source</span>\n                                        </div>\n                                        <div className=\"flex gap-1\">\n                                            {dataColumns.slice(0, 3).map(col => (\n                                                <span key={col} className=\"px-1.5 py-0.5 bg-blue-900/20 text-blue-400 border border-blue-900/30 rounded text-[9px]\">\n                                                    {col}\n                                                </span>\n                                            ))}\n                                            {dataColumns.length > 3 && <span className=\"text-[9px] text-neutral-600\">+{dataColumns.length - 3} more</span>}\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* Script Editor (Monaco) */}\n                            <div className=\"h-[450px] relative group\">\n                                <Editor\n                                    height=\"100%\"\n                                    theme=\"automation-dark\"\n                                    beforeMount={(monaco) => {\n                                        monaco.editor.defineTheme('automation-dark', {\n                                            base: 'vs-dark',\n                                            inherit: true,\n                                            rules: [],\n                                            colors: {\n                                                'editor.background': '#0a0a0a',\n                                                'editorGutter.background': '#0a0a0a',\n                                            },\n                                        });\n                                    }}\n                                    language={selectedFile?.endsWith('.py') ? 'python' : (selectedFile?.endsWith('.ts') ? 'typescript' : 'json')}\n                                    value={fileContent}\n                                    onChange={(value) => setFileContent(value || '')}\n                                    options={{\n                                        minimap: { enabled: false },\n                                        fontSize: 13,\n                                        lineNumbers: 'on',\n                                        roundedSelection: true,\n                                        scrollBeyondLastLine: false,\n                                        readOnly: isRunning,\n                                        automaticLayout: true,\n                                        fontFamily: 'JetBrains Mono, Menlo, Monaco, Courier New, monospace',\n                                        padding: { top: 16, bottom: 16 },\n                                    }}\n                                />\n                                {isRunning && (\n                                    <div className=\"absolute inset-0 bg-black/20 backdrop-blur-[1px] flex items-center justify-center z-20\">\n                                        <div className=\"bg-neutral-900/80 border border-neutral-800 rounded-full px-4 py-2 flex items-center space-x-2 shadow-2xl\">\n                                            <Loader2 className=\"w-4 h-4 animate-spin text-emerald-500\" />\n                                            <span className=\"text-xs font-medium text-neutral-300\">Execution in progress...</span>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                        {/* Results / Terminal Output */}\n                        <TerminalWindow \n                            logs={terminalLogs} \n                            onClear={() => setTerminalLogs([])} \n                        />\n                    </div>\n                ) : (\n                    <div className=\"h-[500px] bg-neutral-900/30 border border-neutral-800 border-dashed rounded-2xl flex flex-col items-center justify-center text-neutral-500 space-y-4\">\n                        <div className=\"p-4 bg-neutral-900 rounded-2xl border border-neutral-800 shadow-xl\">\n                            <FileCode className=\"w-12 h-12 opacity-20 text-emerald-500\" />\n                        </div>\n                        <div className=\"text-center\">\n                            <h3 className=\"text-white font-medium\">No Script Selected</h3>\n                            <p className=\"text-sm text-neutral-600 mt-1\">Select a test from the explorer to begin editing.</p>\n                        </div>\n                    </div>\n                )}\n            </div>\n            {showAiSidebar && (\n                <AiAssistantSidebar \n                    onSuggestion={(steps) => {\n                        if (selectedFile?.endsWith('.json')) {\n                            setFileContent(JSON.stringify(steps, null, 2));\n                        } else {\n                            setAiSteps(steps);\n                            setViewMode('json');\n                        }\n                    }} \n                />\n            )}\n        </div>\n    </div>\n</div>\n</div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\cucumber.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\features\\support\\hooks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\features\\support\\world.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\playwright.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\scripts\\verify-db.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":18,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":43},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":14,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const Database = require('better-sqlite3');\r\nconst path = require('path');\r\n\r\nconst dbPath = path.join(__dirname, '../automation.db');\r\nconst db = new Database(dbPath);\r\n\r\nconst tables = db.prepare(\"SELECT name FROM sqlite_master WHERE type='table'\").all();\r\nconsole.log('Tables:', tables);\r\n\r\ntry {\r\n    const pages = db.prepare('SELECT * FROM pages').all();\r\n    console.log('Pages:', pages);\r\n} catch (e) {\r\n    console.log('Error querying pages:', e.message);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Automation\\automation-platform\\tests\\example.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]